<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"freegostudio.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="废狗的博客">
<meta property="og:url" content="https://freegostudio.github.io/index.html">
<meta property="og:site_name" content="废狗的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jacky Jiang">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://freegostudio.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>废狗的博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">废狗的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jacky Jiang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/11/30/%E7%8A%B6%E6%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/30/%E7%8A%B6%E6%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">状态设计模式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-11-30 23:48:39 / 修改时间：23:50:14" itemprop="dateCreated datePublished" datetime="2023-11-30T23:48:39+08:00">2023-11-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="state-design-pattern">State Design Pattern</h1>
<h2 id="story">Story</h2>
<p>需要制作一个游戏中玩家操控的角色的动画控制器 <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXMtYXNjaWkiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSI0ODFweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjYzNXB4O2hlaWdodDo0ODFweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA2MzUgNDgxIiB3aWR0aD0iNjM1cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTAiIHg9IjI2NS44OTEzIiB5PSIyMi45OTUxIj4mIzM1MjgyOyYjMzMzOTQ7JiMyMjUyMjsmIzI2NDEyOyYjMjExNjA7JiMyMDMxNjs8L3RleHQ+PGcgaWQ9IklkbGUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTAiIHg9IjE1Mi43ODI2IiB5PSIxNzEuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE1Mi43ODI2IiB4Mj0iMjAyLjc4MjYiIHkxPSIxOTcuNTkzOCIgeTI9IjE5Ny41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9IjE2NC43ODI2IiB5PSIxODkuMjkyIj5JZGxlPC90ZXh0PjwvZz48ZyBpZD0iUnVuIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwIiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUwIiB4PSIzODUuNzgyNiIgeT0iMTcxLjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIzODUuNzgyNiIgeDI9IjQzNS43ODI2IiB5MT0iMTk3LjU5MzgiIHkyPSIxOTcuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3IiB4PSIzOTcuMjgyNiIgeT0iMTg5LjI5MiI+UnVuPC90ZXh0PjwvZz48ZyBpZD0iUmlzZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI1MCIgeD0iNy43ODI2IiB5PSIyOTguMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjcuNzgyNiIgeDI9IjU3Ljc4MjYiIHkxPSIzMjQuNTkzOCIgeTI9IjMyNC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzAiIHg9IjE3Ljc4MjYiIHk9IjMxNi4yOTIiPlJpc2U8L3RleHQ+PC9nPjxnIGlkPSJGYWxsIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwIiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUwIiB4PSIxNTIuNzgyNiIgeT0iNDI1LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNTIuNzgyNiIgeDI9IjIwMi43ODI2IiB5MT0iNDUxLjU5MzgiIHkyPSI0NTEuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0IiB4PSIxNjUuNzgyNiIgeT0iNDQzLjI5MiI+RmFsbDwvdGV4dD48L2c+PGcgaWQ9IkF0dGFjayI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2OSIgeD0iMTQzLjI4MjYiIHk9IjQ0LjI5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxNDMuMjgyNiIgeDI9IjIxMi4yODI2IiB5MT0iNzAuNTkzOCIgeTI9IjcwLjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OSIgeD0iMTUzLjI4MjYiIHk9IjYyLjI5MiI+QXR0YWNrPC90ZXh0PjwvZz48ZWxsaXBzZSBjeD0iMTA3Ljc4MjYiIGN5PSIxOTYuMjk2OSIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MS4wOyIvPjwhLS1saW5rICpzdGFydCogdG8gSWRsZS0tPjxnIGlkPSJsaW5rXypzdGFydCpfSWRsZSI+PHBhdGggZD0iTTExNy44OTk2LDE5Ni4yOTY5IEMxMjkuNDM5NiwxOTYuMjk2OSAxMzQuOTc5NiwxOTYuMjk2OSAxNDYuNTE5NiwxOTYuMjk2OSAiIGZpbGw9Im5vbmUiIGlkPSIqc3RhcnQqLXRvLUlkbGUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTUyLjUxOTYsMTk2LjI5NjksMTQzLjUxOTYsMTkyLjI5NjksMTQ3LjUxOTYsMTk2LjI5NjksMTQzLjUxOTYsMjAwLjI5NjksMTUyLjUxOTYsMTk2LjI5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIEF0dGFjayB0byBJZGxlLS0+PGcgaWQ9ImxpbmtfQXR0YWNrX0lkbGUiPjxwYXRoIGQ9Ik0xMzguNDEzMiw5NC44NTkyIEMxMjcuMjE0MiwxMDMuNTY4MiAxMjAuODYyNiwxMTEuMDc4OSAxMTQuNzgyNiwxMjQuMjk2OSBDMTAzLjkwMjcsMTQ3Ljk1MTkgMTMwLjQ1MDYsMTY5LjQ1MjkgMTUyLjM3MDYsMTgyLjQ0ODkgIiBmaWxsPSJub25lIiBpZD0iQXR0YWNrLWJhY2t0by1JZGxlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE0My4xNDk2LDkxLjE3NTksMTMzLjU4OTUsOTMuNTQzMiwxMzkuMjAyNiw5NC4yNDUzLDEzOC41MDA2LDk5Ljg1ODQsMTQzLjE0OTYsOTEuMTc1OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzgiIHg9IjExNS43ODI2IiB5PSIxMzcuMzYzOCI+JiMzNjc1NTsmIzIwODM3OyYjMjU5MTU7JiMyMDk4NzsmIzI1MzUxOyYjMjAxOTY7PC90ZXh0PjwvZz48IS0tbGluayBBdHRhY2sgdG8gSWRsZS0tPjxnIGlkPSJsaW5rX0F0dGFja19JZGxlIj48cGF0aCBkPSJNMTg5LjM4MzYsOTQuNDYyOSBDMTkzLjE3MjYsMTAzLjU5MTkgMTk2Ljg5MDYsMTE0LjIxMjkgMTk4Ljc4MjYsMTI0LjI5NjkgQzIwMS43Njg2LDE0MC4yMTU5IDE5OS4xMTA4LDE1Mi4xNTcgMTkzLjIyMDgsMTY1Ljc3MyAiIGZpbGw9Im5vbmUiIGlkPSJBdHRhY2stdG8tSWRsZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxOTAuODM4NiwxNzEuMjc5OSwxOTguMDgzMSwxNjQuNjA3NywxOTIuODIzOCwxNjYuNjkwOCwxOTAuNzQwNiwxNjEuNDMxNSwxOTAuODM4NiwxNzEuMjc5OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzgiIHg9IjIwMC43ODI2IiB5PSIxMzcuMzYzOCI+JiMyNTkxNTsmIzIwOTg3OyYjMjExNjA7JiMyMDMxNjsmIzIzNDM2OyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tbGluayBJZGxlIHRvIFJ1bi0tPjxnIGlkPSJsaW5rX0lkbGVfUnVuIj48cGF0aCBkPSJNMjAzLjE2MTYsMTk2LjI5NjkgQzI0Ny45ODA2LDE5Ni4yOTY5IDMzNC42Mzc2LDE5Ni4yOTY5IDM3OS40MzU2LDE5Ni4yOTY5ICIgZmlsbD0ibm9uZSIgaWQ9IklkbGUtdG8tUnVuIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM4NS40MzU2LDE5Ni4yOTY5LDM3Ni40MzU2LDE5Mi4yOTY5LDM4MC40MzU2LDE5Ni4yOTY5LDM3Ni40MzU2LDIwMC4yOTY5LDM4NS40MzU2LDE5Ni4yOTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDYiIHg9IjIyMS4yODI2IiB5PSIxODkuMzYzOCI+YWJzKHgmIzI2MDQxOyYjMjE1MjE7JiMzNjc1NTsmIzIwODM3OyYjMjA1NDA7KSZndDs9MC4xPC90ZXh0PjwvZz48IS0tbGluayBSdW4gdG8gSWRsZS0tPjxnIGlkPSJsaW5rX1J1bl9JZGxlIj48cGF0aCBkPSJNMzg1Ljc0MTYsMjA5LjAyNjkgQzM3OC42NjA2LDIxMi4wMTY5IDM3MC44MjU2LDIxNC43NzM5IDM2My4yODI2LDIxNi4yOTY5IEMzMzMuMjIyNiwyMjIuMzY2OSAyNTUuMzQyNiwyMjIuMzY2OSAyMjUuMjgyNiwyMTYuMjk2OSBDMjE3LjczOTYsMjE0Ljc3MzkgMjE1LjQzMjEsMjE0LjM1MDkgMjA4LjM1MTEsMjExLjM2MDkgIiBmaWxsPSJub25lIiBpZD0iUnVuLXRvLUlkbGUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjAyLjgyMzYsMjA5LjAyNjksMjA5LjU1ODgsMjE2LjIxMjgsMjA3LjQyOTgsMjEwLjk3MTksMjEyLjY3MDgsMjA4Ljg0MjksMjAyLjgyMzYsMjA5LjAyNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNiIgeD0iMjI2LjI4MjYiIHk9IjIxMi4zNjM4Ij5hYnMoeCYjMjYwNDE7JiMyMTUyMTsmIzM2NzU1OyYjMjA4Mzc7JiMyMDU0MDspJmx0OzAuMTwvdGV4dD48L2c+PCEtLWxpbmsgUnVuIHRvIFJ1bi0tPjxnIGlkPSJsaW5rX1J1bl9SdW4iPjxwYXRoIGQ9Ik00MzYuMDYwNiwxODUuODA2OSBDNDUzLjU1NTYsMTgyLjYyODkgNDcwLjc4MjYsMTg2LjEyNDkgNDcwLjc4MjYsMTk2LjI5NjkgQzQ3MC43ODI2LDIwNi40Njg5IDQ1OS40NTksMjExLjAzNzIgNDQxLjk2NCwyMDcuODU5MiAiIGZpbGw9Im5vbmUiIGlkPSJSdW4tdG8tUnVuIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQzNi4wNjA2LDIwNi43ODY5LDQ0NC4yMDA4LDIxMi4zMzEsNDQwLjk4MDEsMjA3LjY4MDUsNDQ1LjYzMDYsMjA0LjQ1OTgsNDM2LjA2MDYsMjA2Ljc4NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0NiIgeD0iNDc2Ljc4MjYiIHk9IjIwMC44NjM4Ij5hYnMoeCYjMjYwNDE7JiMyMTUyMTsmIzM2NzU1OyYjMjA4Mzc7JiMyMDU0MDspJmd0Oz0wLjE8L3RleHQ+PC9nPjwhLS1saW5rIElkbGUgdG8gUmlzZS0tPjxnIGlkPSJsaW5rX0lkbGVfUmlzZSI+PHBhdGggZD0iTTE1Mi40NjM2LDIxMS43ODQ5IEMxNDYuNjkwNiwyMTQuOTg4OSAxNDAuNTU1NiwyMTguMzE0OSAxMzQuNzgyNiwyMjEuMjk2OSBDMTA3LjIyODIsMjM1LjUyNzkgOTQuMzM3MiwyMzAuMDExOSA3MS43ODI2LDI1MS4yOTY5IEM1OC4wNzcsMjY0LjIzMDkgNTAuNDAzNywyNzcuNTY1NiA0My45NDQxLDI5Mi41OTE2ICIgZmlsbD0ibm9uZSIgaWQ9IklkbGUtdG8tUmlzZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MS41NzQ0LDI5OC4xMDM5LDQ4LjgwMzgsMjkxLjQxNTMsNDMuNTQ5MiwyOTMuNTEwNCw0MS40NTQxLDI4OC4yNTU4LDQxLjU3NDQsMjk4LjEwMzkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4IiB4PSI3Mi43ODI2IiB5PSIyNjQuMzYzOCI+JiMzNjc1NTsmIzIwODM3OyYjMzYzMzk7JiMzNjI5MTsmIzI1MzUxOyYjMjAxOTY7PC90ZXh0PjwvZz48IS0tbGluayBSaXNlIHRvIEZhbGwtLT48ZyBpZD0ibGlua19SaXNlX0ZhbGwiPjxwYXRoIGQ9Ik0xNy43OTUzLDM0OC41Nzk5IEMxMC44MjU1LDM2My4yNzE5IDYsMzgxLjcyNDIgMTUuNzgyNiwzOTUuMjk2OSBDNDcuMjQ0OCw0MzguOTQ4MyAxMDkuNTMwNCw0NDcuNjA3MyAxNDYuNjA3NCw0NDkuMDg5NyAiIGZpbGw9Im5vbmUiIGlkPSJSaXNlLXRvLUZhbGwiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTUyLjYwMjYsNDQ5LjMyOTQsMTQzLjc2OTYsNDQ0Ljk3MywxNDcuNjA2Niw0NDkuMTI5NiwxNDMuNDUsNDUyLjk2NjYsMTUyLjYwMjYsNDQ5LjMyOTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNCIgeD0iMTYuNzgyNiIgeT0iMzkxLjM2MzgiPiYjMzUyODI7JiMzMzM5NDt5JiMzNjcyNDsmIzI2MDQxOyYjMjE1MjE7JiMzNjg5NTsmIzI0MjMwOyZsdDstMC4xPC90ZXh0PjwvZz48IS0tbGluayBGYWxsIHRvIElkbGUtLT48ZyBpZD0ibGlua19GYWxsX0lkbGUiPjxwYXRoIGQ9Ik0yMDIuODI1Niw0MzguODUyIEMyNTIuMjA4Niw0MTYuNjE4NCAzNTQuNjI1NiwzNjEuNDQ4OSAzMjEuNzgyNiwyOTguMjk2OSBDMjk2Ljc3MzYsMjUwLjIwODkgMjQyLjc3ODIsMjIyLjUwMzcgMjA4LjYwNTIsMjA4LjY1MjcgIiBmaWxsPSJub25lIiBpZD0iRmFsbC10by1JZGxlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwMy4wNDQ2LDIwNi4zOTg5LDIwOS44ODMsMjEzLjQ4NjcsMjA3LjY3ODUsMjA4LjI3NzEsMjEyLjg4ODEsMjA2LjA3MjUsMjAzLjA0NDYsMjA2LjM5ODkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4IiB4PSIzMjkuNzgyNiIgeT0iMzI3Ljg2MzgiPiYjMzUyODI7JiMzMzM5NDsmIzI1NTA5OyYjMzUzMDI7JiMyMjMyMDsmIzM4NzU0OzwvdGV4dD48L2c+PCEtLWxpbmsgSWRsZSB0byBGYWxsLS0+PGcgaWQ9ImxpbmtfSWRsZV9GYWxsIj48cGF0aCBkPSJNMTc3Ljc4MjYsMjIxLjQ1OTkgQzE3Ny43ODI2LDI2OS42MjY5IDE3Ny43ODI2LDM3MS4wOTk4IDE3Ny43ODI2LDQxOS4yMDcyICIgZmlsbD0ibm9uZSIgaWQ9IklkbGUtdG8tRmFsbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNzcuNzgyNiw0MjUuMjA3MiwxODEuNzgyNiw0MTYuMjA3MiwxNzcuNzgyNiw0MjAuMjA3MiwxNzMuNzgyNiw0MTYuMjA3MiwxNzcuNzgyNiw0MjUuMjA3MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM0IiB4PSIxNzguNzgyNiIgeT0iMzI3Ljg2MzgiPiYjMzUyODI7JiMzMzM5NDt5JiMzNjcyNDsmIzI2MDQxOyYjMjE1MjE7JiMzNjg5NTsmIzI0MjMwOyZsdDstMC4xPC90ZXh0PjwvZz48IS0tU1JDPVtBeWFpb0tiTFVCNXlxZWxFSktfZHh0ZXNQeXRKaFhMRnppeFh1WWVrSUluOUxWMUNvS2M1Q2VEQXlzMmlwNkFPZTVqWUpXd0t3TFhJYWZZU3BTS0xoSE1oZTZpN3FHYVk1N0hCMnUxeVlCSTJiU0FCVlBFVmpZdnpEY050cV9SVHB0aFFkLW5VbVdNTHF1TGcwb2cySTRGU3lkSFRweEVFMkwycHg0M2swMmY4SjJoTWc3V3NSVVZKMkhDWDFadmpzQURmUHNrV1B5VzVLYTIyRWdZRE0xTlFXREgxQjBRUDJGR3R0MENsamN6LWlScVB3VzZtMzRXOUEzbjBJaTAxTWxiWXhuUThZSXlSdlpfVGpTbjY1c0dTTTBjSUxvNWdkX0tqVlI1eXNUQ3Y2cnhFTk9JbWFSMW4wMDAwXS0tPjwvZz48L3N2Zz4="></p>
<p>将以上状态变化用代码实现</p>
<ol type="1">
<li><p>需要定义一系列的状态 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Idle = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Run = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Attack = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Rise = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Fall = <span class="number">4</span>;</span><br></pre></td></tr></table></figure></p></li>
<li><p>定义一个存储当前状态的变量 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> State = Idle;</span><br></pre></td></tr></table></figure></p></li>
<li><p>根据当前的状态, 执行该动作对应的效果 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 动作：输入攻击指令</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InputAttackCommand</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (State == Idle)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"播放Attack动画"</span>);</span><br><span class="line">        State = Attack;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Run)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在奔跑时攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Attack)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在攻击时攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Rise)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在跳跃中攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Fall)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在下落中攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 动作：攻击动作完成</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AttackActionComplete</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (State == Idle)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Run)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Attack)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"完成Idle动画"</span>);</span><br><span class="line">        State = Idle;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Rise)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Fall)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">......</span><br></pre></td></tr></table></figure></p></li>
<li><p>通过调用对应的动作就完成状态的转换了 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stateMachine.InputAttackCommand();</span><br></pre></td></tr></table></figure> 但是,
如果需要加入一个新的状态<code>Walk</code>, 则首先需要加入一个状态值
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Walk = <span class="number">5</span>;</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>然后需要对所有的动作都需要加入一个新的状态的判断 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 动作：输入攻击指令</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InputAttackCommand</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (State == Idle)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"播放Attack动画"</span>);</span><br><span class="line">        State = Attack;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Run)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在奔跑时攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Attack)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在攻击时攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Rise)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在跳跃中攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Fall)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"不能在下落中攻击"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Walk)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">//行走的处理</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 动作：攻击动作完成</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AttackActionComplete</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (State == Idle)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Run)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Attack)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"完成Idle动画"</span>);</span><br><span class="line">        State = Idle;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Rise)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Fall)</span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"当前不处于攻击中"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (State == Walk)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">//行走的处理</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">......</span><br></pre></td></tr></table></figure></p>
<p>很明显这并没有遵守<code>开放-关闭原则</code>,
也不符合面向对象的设计.</p>
<h2 id="改进">改进</h2>
<p>因此, 需要改进代码: 1. 定义一个IState接口,
在这个接口内间每个动作都有一个对应的方法. 2. 为每个状态实现一个状态类.
这些类将负责在对应状态下进行的行为. 3.
将状态对应的动作逻辑写入这些方法中.</p>
<h3 id="类图">类图</h3>
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXMtYXNjaWkiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSIzOThweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjE1NzRweDtoZWlnaHQ6Mzk4cHg7YmFja2dyb3VuZDojRkZGRkZGOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMTU3NCAzOTgiIHdpZHRoPSIxNTc0cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48IS0tY2xhc3MgSVN0YXRlLS0+PGcgaWQ9ImVsZW1fSVN0YXRlIj48cmVjdCBjb2RlTGluZT0iMSIgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNjIuMDc4MSIgaWQ9IklTdGF0ZSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjcwIiB4PSI2NTIiIHk9IjciLz48ZWxsaXBzZSBjeD0iNzYyLjI1IiBjeT0iMjMiIGZpbGw9IiNCNEE3RTUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cGF0aCBkPSJNNzYzLjIwMzEsMTkuNzgxMyBMNzY0LjkyMTksMTkuNzgxMyBDNzY1LjMxMjUsMTkuNzgxMyA3NjUuNSwxOS43NSA3NjUuNjI1LDE5LjY3MTkgQzc2NS44OTA2LDE5LjUxNTYgNzY2LjAzMTMsMTkuMjM0NCA3NjYuMDMxMywxOC45Mzc1IEM3NjYuMDMxMywxOC42NzE5IDc2NS45MjE5LDE4LjQwNjMgNzY1LjY4NzUsMTguMjM0NCBDNzY1LjUxNTYsMTguMTI1IDc2NS4zNzUsMTguMDkzOCA3NjQuOTIxOSwxOC4wOTM4IEw3NTkuNzgxMywxOC4wOTM4IEM3NTkuMzQzOCwxOC4wOTM4IDc1OS4yMTg4LDE4LjEwOTQgNzU5LjA2MjUsMTguMjAzMSBDNzU4LjgxMjUsMTguMzU5NCA3NTguNjU2MywxOC42NTYzIDc1OC42NTYzLDE4LjkzNzUgQzc1OC42NTYzLDE5LjIxODggNzU4Ljc5NjksMTkuNDY4OCA3NTkuMDE1NiwxOS42NDA2IEM3NTkuMTcxOSwxOS43NSA3NTkuMzU5NCwxOS43ODEzIDc1OS43ODEzLDE5Ljc4MTMgTDc2MS41LDE5Ljc4MTMgTDc2MS41LDI2LjI5NjkgTDc1OS43ODEzLDI2LjI5NjkgQzc1OS4zNDM4LDI2LjI5NjkgNzU5LjIxODgsMjYuMzEyNSA3NTkuMDYyNSwyNi40MjE5IEM3NTguODEyNSwyNi41NzgxIDc1OC42NTYzLDI2Ljg1OTQgNzU4LjY1NjMsMjcuMTU2MyBDNzU4LjY1NjMsMjcuNDA2MyA3NTguNzk2OSwyNy42NzE5IDc1OS4wMTU2LDI3LjgyODEgQzc1OS4xNzE5LDI3Ljk1MzEgNzU5LjM3NSwyOCA3NTkuNzgxMywyOCBMNzY0LjkyMTksMjggQzc2NS42NzE5LDI4IDc2Ni4wMzEzLDI3LjcxODggNzY2LjAzMTMsMjcuMTU2MyBDNzY2LjAzMTMsMjYuODc1IDc2NS45MjE5LDI2LjYyNSA3NjUuNjg3NSwyNi40NTMxIEM3NjUuNTE1NiwyNi4zMjgxIDc2NS4zNzUsMjYuMjk2OSA3NjQuOTIxOSwyNi4yOTY5IEw3NjMuMjAzMSwyNi4yOTY5IEw3NjMuMjAzMSwxOS43ODEzIFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MSIgeD0iNzgyLjc1IiB5PSIyNy44NDY3Ij5JU3RhdGU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjUzIiB4Mj0iOTIxIiB5MT0iMzkiIHkyPSIzOSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjY1MyIgeDI9IjkyMSIgeTE9IjQ3IiB5Mj0iNDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDkiIHg9IjY1OCIgeT0iNjMuOTk1MSI+dm9pZCBJbnB1dEF0dGFja0NvbW1hbmQoKTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjE3IiB4PSI2NTgiIHk9IjgwLjI5MiI+dm9pZCBBdHRhY2tBY3Rpb25Db21wbGV0ZSgpOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNDIiIHg9IjY1OCIgeT0iOTYuNTg4OSI+dm9pZCBJbnB1dFhUaGFuVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjM4IiB4PSI2NTgiIHk9IjExMi44ODU3Ij52b2lkIElucHV0WExlc3NUaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTYiIHg9IjY1OCIgeT0iMTI5LjE4MjYiPnZvaWQgSW5wdXRKdW1wQ29tbWFuZCgpOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTgiIHg9IjY1OCIgeT0iMTQ1LjQ3OTUiPnZvaWQgWVZlbG9jaXR5TGVzc1RocmVzaG9sZFZhbHVlKCk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwMiIgeD0iNjU4IiB5PSIxNjEuNzc2NCI+dm9pZCBDaGFyYWN0ZXJUb3VjaFBsYW5lKCk7PC90ZXh0PjwvZz48IS0tY2xhc3MgSWRsZVN0YXRlLS0+PGcgaWQ9ImVsZW1fSWRsZVN0YXRlIj48cmVjdCBjb2RlTGluZT0iMTEiIGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTYyLjA3ODEiIGlkPSJJZGxlU3RhdGUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI4NCIgeD0iNyIgeT0iMjI5Ii8+PGVsbGlwc2UgY3g9IjExMS43NSIgY3k9IjI0NSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwYXRoIGQ9Ik0xMTQuMDkzOCwyNDAuNjcxOSBDMTEzLjE1NjMsMjQwLjIzNDQgMTEyLjU2MjUsMjQwLjA5MzggMTExLjY4NzUsMjQwLjA5MzggQzEwOS4wNjI1LDI0MC4wOTM4IDEwNy4wNjI1LDI0Mi4xNzE5IDEwNy4wNjI1LDI0NC44OTA2IEwxMDcuMDYyNSwyNDYuMDE1NiBDMTA3LjA2MjUsMjQ4LjU5MzggMTA5LjE3MTksMjUwLjQ4NDQgMTEyLjA2MjUsMjUwLjQ4NDQgQzExMy4yODEzLDI1MC40ODQ0IDExNC40Mzc1LDI1MC4xODc1IDExNS4xODc1LDI0OS42NDA2IEMxMTUuNzY1NiwyNDkuMjM0NCAxMTYuMDkzOCwyNDguNzgxMyAxMTYuMDkzOCwyNDguMzkwNiBDMTE2LjA5MzgsMjQ3LjkzNzUgMTE1LjcwMzEsMjQ3LjU0NjkgMTE1LjIzNDQsMjQ3LjU0NjkgQzExNS4wMTU2LDI0Ny41NDY5IDExNC44MTI1LDI0Ny42MjUgMTE0LjYyNSwyNDcuODEyNSBDMTE0LjE3MTksMjQ4LjI5NjkgMTE0LjE3MTksMjQ4LjI5NjkgMTEzLjk4NDQsMjQ4LjM5MDYgQzExMy41NjI1LDI0OC42NTYzIDExMi44NzUsMjQ4Ljc4MTMgMTEyLjEwOTQsMjQ4Ljc4MTMgQzExMC4wNjI1LDI0OC43ODEzIDEwOC43NjU2LDI0Ny42ODc1IDEwOC43NjU2LDI0NS45ODQ0IEwxMDguNzY1NiwyNDQuODkwNiBDMTA4Ljc2NTYsMjQzLjEwOTQgMTEwLjAxNTYsMjQxLjc5NjkgMTExLjc1LDI0MS43OTY5IEMxMTIuMzI4MSwyNDEuNzk2OSAxMTIuOTM3NSwyNDEuOTUzMSAxMTMuNDA2MywyNDIuMjAzMSBDMTEzLjg5MDYsMjQyLjQ4NDQgMTE0LjA2MjUsMjQyLjcwMzEgMTE0LjE1NjMsMjQzLjEwOTQgQzExNC4yMTg4LDI0My41MTU2IDExNC4yNSwyNDMuNjQwNiAxMTQuMzkwNiwyNDMuNzY1NiBDMTE0LjUzMTMsMjQzLjkwNjMgMTE0Ljc2NTYsMjQ0LjAxNTYgMTE0Ljk4NDQsMjQ0LjAxNTYgQzExNS4yNSwyNDQuMDE1NiAxMTUuNTE1NiwyNDMuODc1IDExNS42ODc1LDI0My42NTYzIEMxMTUuNzk2OSwyNDMuNSAxMTUuODI4MSwyNDMuMzEyNSAxMTUuODI4MSwyNDIuODkwNiBMMTE1LjgyODEsMjQxLjQ2ODggQzExNS44MjgxLDI0MS4wMzEzIDExNS44MTI1LDI0MC45MDYzIDExNS43MTg4LDI0MC43NSBDMTE1LjU2MjUsMjQwLjQ4NDQgMTE1LjI4MTMsMjQwLjM0MzggMTE0Ljk4NDQsMjQwLjM0MzggQzExNC42ODc1LDI0MC4zNDM4IDExNC40ODQ0LDI0MC40Mzc1IDExNC4yNjU2LDI0MC43NSBMMTE0LjA5MzgsMjQwLjY3MTkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NiIgeD0iMTMyLjI1IiB5PSIyNDkuODQ2NyI+SWRsZVN0YXRlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIyOTAiIHkxPSIyNjEiIHkyPSIyNjEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iMjkwIiB5MT0iMjY5IiB5Mj0iMjY5Ii8+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMjgyLjY0ODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjA5IiB4PSIyNyIgeT0iMjg1Ljk5NTEiPnZvaWQgSW5wdXRBdHRhY2tDb21tYW5kKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxOCIgY3k9IjI5OC45NDUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIxNyIgeD0iMjciIHk9IjMwMi4yOTIiPnZvaWQgQXR0YWNrQWN0aW9uQ29tcGxldGUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMzE1LjI0MjIiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjQyIiB4PSIyNyIgeT0iMzE4LjU4ODkiPnZvaWQgSW5wdXRYVGhhblRocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxOCIgY3k9IjMzMS41MzkxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzOCIgeD0iMjciIHk9IjMzNC44ODU3Ij52b2lkIElucHV0WExlc3NUaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iMTgiIGN5PSIzNDcuODM1OSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTYiIHg9IjI3IiB5PSIzNTEuMTgyNiI+dm9pZCBJbnB1dEp1bXBDb21tYW5kKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxOCIgY3k9IjM2NC4xMzI4IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI1OCIgeD0iMjciIHk9IjM2Ny40Nzk1Ij52b2lkIFlWZWxvY2l0eUxlc3NUaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iMTgiIGN5PSIzODAuNDI5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDIiIHg9IjI3IiB5PSIzODMuNzc2NCI+dm9pZCBDaGFyYWN0ZXJUb3VjaFBsYW5lKCk7PC90ZXh0PjwvZz48IS0tY2xhc3MgUnVuU3RhdGUtLT48ZyBpZD0iZWxlbV9SdW5TdGF0ZSI+PHJlY3QgY29kZUxpbmU9IjIxIiBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE2Mi4wNzgxIiBpZD0iUnVuU3RhdGUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI4NCIgeD0iMzI2IiB5PSIyMjkiLz48ZWxsaXBzZSBjeD0iNDMwLjI1IiBjeT0iMjQ1IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBhdGggZD0iTTQzMi41OTM4LDI0MC42NzE5IEM0MzEuNjU2MywyNDAuMjM0NCA0MzEuMDYyNSwyNDAuMDkzOCA0MzAuMTg3NSwyNDAuMDkzOCBDNDI3LjU2MjUsMjQwLjA5MzggNDI1LjU2MjUsMjQyLjE3MTkgNDI1LjU2MjUsMjQ0Ljg5MDYgTDQyNS41NjI1LDI0Ni4wMTU2IEM0MjUuNTYyNSwyNDguNTkzOCA0MjcuNjcxOSwyNTAuNDg0NCA0MzAuNTYyNSwyNTAuNDg0NCBDNDMxLjc4MTMsMjUwLjQ4NDQgNDMyLjkzNzUsMjUwLjE4NzUgNDMzLjY4NzUsMjQ5LjY0MDYgQzQzNC4yNjU2LDI0OS4yMzQ0IDQzNC41OTM4LDI0OC43ODEzIDQzNC41OTM4LDI0OC4zOTA2IEM0MzQuNTkzOCwyNDcuOTM3NSA0MzQuMjAzMSwyNDcuNTQ2OSA0MzMuNzM0NCwyNDcuNTQ2OSBDNDMzLjUxNTYsMjQ3LjU0NjkgNDMzLjMxMjUsMjQ3LjYyNSA0MzMuMTI1LDI0Ny44MTI1IEM0MzIuNjcxOSwyNDguMjk2OSA0MzIuNjcxOSwyNDguMjk2OSA0MzIuNDg0NCwyNDguMzkwNiBDNDMyLjA2MjUsMjQ4LjY1NjMgNDMxLjM3NSwyNDguNzgxMyA0MzAuNjA5NCwyNDguNzgxMyBDNDI4LjU2MjUsMjQ4Ljc4MTMgNDI3LjI2NTYsMjQ3LjY4NzUgNDI3LjI2NTYsMjQ1Ljk4NDQgTDQyNy4yNjU2LDI0NC44OTA2IEM0MjcuMjY1NiwyNDMuMTA5NCA0MjguNTE1NiwyNDEuNzk2OSA0MzAuMjUsMjQxLjc5NjkgQzQzMC44MjgxLDI0MS43OTY5IDQzMS40Mzc1LDI0MS45NTMxIDQzMS45MDYzLDI0Mi4yMDMxIEM0MzIuMzkwNiwyNDIuNDg0NCA0MzIuNTYyNSwyNDIuNzAzMSA0MzIuNjU2MywyNDMuMTA5NCBDNDMyLjcxODgsMjQzLjUxNTYgNDMyLjc1LDI0My42NDA2IDQzMi44OTA2LDI0My43NjU2IEM0MzMuMDMxMywyNDMuOTA2MyA0MzMuMjY1NiwyNDQuMDE1NiA0MzMuNDg0NCwyNDQuMDE1NiBDNDMzLjc1LDI0NC4wMTU2IDQzNC4wMTU2LDI0My44NzUgNDM0LjE4NzUsMjQzLjY1NjMgQzQzNC4yOTY5LDI0My41IDQzNC4zMjgxLDI0My4zMTI1IDQzNC4zMjgxLDI0Mi44OTA2IEw0MzQuMzI4MSwyNDEuNDY4OCBDNDM0LjMyODEsMjQxLjAzMTMgNDM0LjMxMjUsMjQwLjkwNjMgNDM0LjIxODgsMjQwLjc1IEM0MzQuMDYyNSwyNDAuNDg0NCA0MzMuNzgxMywyNDAuMzQzOCA0MzMuNDg0NCwyNDAuMzQzOCBDNDMzLjE4NzUsMjQwLjM0MzggNDMyLjk4NDQsMjQwLjQzNzUgNDMyLjc2NTYsMjQwLjc1IEw0MzIuNTkzOCwyNDAuNjcxOSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY3IiB4PSI0NTAuNzUiIHk9IjI0OS44NDY3Ij5SdW5TdGF0ZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIzMjciIHgyPSI2MDkiIHkxPSIyNjEiIHkyPSIyNjEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIzMjciIHgyPSI2MDkiIHkxPSIyNjkiIHkyPSIyNjkiLz48ZWxsaXBzZSBjeD0iMzM3IiBjeT0iMjgyLjY0ODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjA5IiB4PSIzNDYiIHk9IjI4NS45OTUxIj52b2lkIElucHV0QXR0YWNrQ29tbWFuZCgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iMzM3IiBjeT0iMjk4Ljk0NTMiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjE3IiB4PSIzNDYiIHk9IjMwMi4yOTIiPnZvaWQgQXR0YWNrQWN0aW9uQ29tcGxldGUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjMzNyIgY3k9IjMxNS4yNDIyIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0MiIgeD0iMzQ2IiB5PSIzMTguNTg4OSI+dm9pZCBJbnB1dFhUaGFuVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjMzNyIgY3k9IjMzMS41MzkxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzOCIgeD0iMzQ2IiB5PSIzMzQuODg1NyI+dm9pZCBJbnB1dFhMZXNzVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjMzNyIgY3k9IjM0Ny44MzU5IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5NiIgeD0iMzQ2IiB5PSIzNTEuMTgyNiI+dm9pZCBJbnB1dEp1bXBDb21tYW5kKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIzMzciIGN5PSIzNjQuMTMyOCIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTgiIHg9IjM0NiIgeT0iMzY3LjQ3OTUiPnZvaWQgWVZlbG9jaXR5TGVzc1RocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIzMzciIGN5PSIzODAuNDI5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDIiIHg9IjM0NiIgeT0iMzgzLjc3NjQiPnZvaWQgQ2hhcmFjdGVyVG91Y2hQbGFuZSgpOzwvdGV4dD48L2c+PCEtLWNsYXNzIEF0dGFja1N0YXRlLS0+PGcgaWQ9ImVsZW1fQXR0YWNrU3RhdGUiPjxyZWN0IGNvZGVMaW5lPSIzMSIgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNjIuMDc4MSIgaWQ9IkF0dGFja1N0YXRlIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyODQiIHg9IjY0NSIgeT0iMjI5Ii8+PGVsbGlwc2UgY3g9IjczOC4yNSIgY3k9IjI0NSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwYXRoIGQ9Ik03NDAuNTkzOCwyNDAuNjcxOSBDNzM5LjY1NjMsMjQwLjIzNDQgNzM5LjA2MjUsMjQwLjA5MzggNzM4LjE4NzUsMjQwLjA5MzggQzczNS41NjI1LDI0MC4wOTM4IDczMy41NjI1LDI0Mi4xNzE5IDczMy41NjI1LDI0NC44OTA2IEw3MzMuNTYyNSwyNDYuMDE1NiBDNzMzLjU2MjUsMjQ4LjU5MzggNzM1LjY3MTksMjUwLjQ4NDQgNzM4LjU2MjUsMjUwLjQ4NDQgQzczOS43ODEzLDI1MC40ODQ0IDc0MC45Mzc1LDI1MC4xODc1IDc0MS42ODc1LDI0OS42NDA2IEM3NDIuMjY1NiwyNDkuMjM0NCA3NDIuNTkzOCwyNDguNzgxMyA3NDIuNTkzOCwyNDguMzkwNiBDNzQyLjU5MzgsMjQ3LjkzNzUgNzQyLjIwMzEsMjQ3LjU0NjkgNzQxLjczNDQsMjQ3LjU0NjkgQzc0MS41MTU2LDI0Ny41NDY5IDc0MS4zMTI1LDI0Ny42MjUgNzQxLjEyNSwyNDcuODEyNSBDNzQwLjY3MTksMjQ4LjI5NjkgNzQwLjY3MTksMjQ4LjI5NjkgNzQwLjQ4NDQsMjQ4LjM5MDYgQzc0MC4wNjI1LDI0OC42NTYzIDczOS4zNzUsMjQ4Ljc4MTMgNzM4LjYwOTQsMjQ4Ljc4MTMgQzczNi41NjI1LDI0OC43ODEzIDczNS4yNjU2LDI0Ny42ODc1IDczNS4yNjU2LDI0NS45ODQ0IEw3MzUuMjY1NiwyNDQuODkwNiBDNzM1LjI2NTYsMjQzLjEwOTQgNzM2LjUxNTYsMjQxLjc5NjkgNzM4LjI1LDI0MS43OTY5IEM3MzguODI4MSwyNDEuNzk2OSA3MzkuNDM3NSwyNDEuOTUzMSA3MzkuOTA2MywyNDIuMjAzMSBDNzQwLjM5MDYsMjQyLjQ4NDQgNzQwLjU2MjUsMjQyLjcwMzEgNzQwLjY1NjMsMjQzLjEwOTQgQzc0MC43MTg4LDI0My41MTU2IDc0MC43NSwyNDMuNjQwNiA3NDAuODkwNiwyNDMuNzY1NiBDNzQxLjAzMTMsMjQzLjkwNjMgNzQxLjI2NTYsMjQ0LjAxNTYgNzQxLjQ4NDQsMjQ0LjAxNTYgQzc0MS43NSwyNDQuMDE1NiA3NDIuMDE1NiwyNDMuODc1IDc0Mi4xODc1LDI0My42NTYzIEM3NDIuMjk2OSwyNDMuNSA3NDIuMzI4MSwyNDMuMzEyNSA3NDIuMzI4MSwyNDIuODkwNiBMNzQyLjMyODEsMjQxLjQ2ODggQzc0Mi4zMjgxLDI0MS4wMzEzIDc0Mi4zMTI1LDI0MC45MDYzIDc0Mi4yMTg4LDI0MC43NSBDNzQyLjA2MjUsMjQwLjQ4NDQgNzQxLjc4MTMsMjQwLjM0MzggNzQxLjQ4NDQsMjQwLjM0MzggQzc0MS4xODc1LDI0MC4zNDM4IDc0MC45ODQ0LDI0MC40Mzc1IDc0MC43NjU2LDI0MC43NSBMNzQwLjU5MzgsMjQwLjY3MTkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OSIgeD0iNzU4Ljc1IiB5PSIyNDkuODQ2NyI+QXR0YWNrU3RhdGU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjQ2IiB4Mj0iOTI4IiB5MT0iMjYxIiB5Mj0iMjYxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNjQ2IiB4Mj0iOTI4IiB5MT0iMjY5IiB5Mj0iMjY5Ii8+PGVsbGlwc2UgY3g9IjY1NiIgY3k9IjI4Mi42NDg0IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwOSIgeD0iNjY1IiB5PSIyODUuOTk1MSI+dm9pZCBJbnB1dEF0dGFja0NvbW1hbmQoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjY1NiIgY3k9IjI5OC45NDUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIxNyIgeD0iNjY1IiB5PSIzMDIuMjkyIj52b2lkIEF0dGFja0FjdGlvbkNvbXBsZXRlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI2NTYiIGN5PSIzMTUuMjQyMiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNDIiIHg9IjY2NSIgeT0iMzE4LjU4ODkiPnZvaWQgSW5wdXRYVGhhblRocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI2NTYiIGN5PSIzMzEuNTM5MSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzgiIHg9IjY2NSIgeT0iMzM0Ljg4NTciPnZvaWQgSW5wdXRYTGVzc1RocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI2NTYiIGN5PSIzNDcuODM1OSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTYiIHg9IjY2NSIgeT0iMzUxLjE4MjYiPnZvaWQgSW5wdXRKdW1wQ29tbWFuZCgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iNjU2IiBjeT0iMzY0LjEzMjgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjU4IiB4PSI2NjUiIHk9IjM2Ny40Nzk1Ij52b2lkIFlWZWxvY2l0eUxlc3NUaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iNjU2IiBjeT0iMzgwLjQyOTciIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAyIiB4PSI2NjUiIHk9IjM4My43NzY0Ij52b2lkIENoYXJhY3RlclRvdWNoUGxhbmUoKTs8L3RleHQ+PC9nPjwhLS1jbGFzcyBSaXNlU3RhdGUtLT48ZyBpZD0iZWxlbV9SaXNlU3RhdGUiPjxyZWN0IGNvZGVMaW5lPSI0MSIgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNjIuMDc4MSIgaWQ9IlJpc2VTdGF0ZSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjg0IiB4PSI5NjQiIHk9IjIyOSIvPjxlbGxpcHNlIGN4PSIxMDY2Ljc1IiBjeT0iMjQ1IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBhdGggZD0iTTEwNjkuMDkzOCwyNDAuNjcxOSBDMTA2OC4xNTYzLDI0MC4yMzQ0IDEwNjcuNTYyNSwyNDAuMDkzOCAxMDY2LjY4NzUsMjQwLjA5MzggQzEwNjQuMDYyNSwyNDAuMDkzOCAxMDYyLjA2MjUsMjQyLjE3MTkgMTA2Mi4wNjI1LDI0NC44OTA2IEwxMDYyLjA2MjUsMjQ2LjAxNTYgQzEwNjIuMDYyNSwyNDguNTkzOCAxMDY0LjE3MTksMjUwLjQ4NDQgMTA2Ny4wNjI1LDI1MC40ODQ0IEMxMDY4LjI4MTMsMjUwLjQ4NDQgMTA2OS40Mzc1LDI1MC4xODc1IDEwNzAuMTg3NSwyNDkuNjQwNiBDMTA3MC43NjU2LDI0OS4yMzQ0IDEwNzEuMDkzOCwyNDguNzgxMyAxMDcxLjA5MzgsMjQ4LjM5MDYgQzEwNzEuMDkzOCwyNDcuOTM3NSAxMDcwLjcwMzEsMjQ3LjU0NjkgMTA3MC4yMzQ0LDI0Ny41NDY5IEMxMDcwLjAxNTYsMjQ3LjU0NjkgMTA2OS44MTI1LDI0Ny42MjUgMTA2OS42MjUsMjQ3LjgxMjUgQzEwNjkuMTcxOSwyNDguMjk2OSAxMDY5LjE3MTksMjQ4LjI5NjkgMTA2OC45ODQ0LDI0OC4zOTA2IEMxMDY4LjU2MjUsMjQ4LjY1NjMgMTA2Ny44NzUsMjQ4Ljc4MTMgMTA2Ny4xMDk0LDI0OC43ODEzIEMxMDY1LjA2MjUsMjQ4Ljc4MTMgMTA2My43NjU2LDI0Ny42ODc1IDEwNjMuNzY1NiwyNDUuOTg0NCBMMTA2My43NjU2LDI0NC44OTA2IEMxMDYzLjc2NTYsMjQzLjEwOTQgMTA2NS4wMTU2LDI0MS43OTY5IDEwNjYuNzUsMjQxLjc5NjkgQzEwNjcuMzI4MSwyNDEuNzk2OSAxMDY3LjkzNzUsMjQxLjk1MzEgMTA2OC40MDYzLDI0Mi4yMDMxIEMxMDY4Ljg5MDYsMjQyLjQ4NDQgMTA2OS4wNjI1LDI0Mi43MDMxIDEwNjkuMTU2MywyNDMuMTA5NCBDMTA2OS4yMTg4LDI0My41MTU2IDEwNjkuMjUsMjQzLjY0MDYgMTA2OS4zOTA2LDI0My43NjU2IEMxMDY5LjUzMTMsMjQzLjkwNjMgMTA2OS43NjU2LDI0NC4wMTU2IDEwNjkuOTg0NCwyNDQuMDE1NiBDMTA3MC4yNSwyNDQuMDE1NiAxMDcwLjUxNTYsMjQzLjg3NSAxMDcwLjY4NzUsMjQzLjY1NjMgQzEwNzAuNzk2OSwyNDMuNSAxMDcwLjgyODEsMjQzLjMxMjUgMTA3MC44MjgxLDI0Mi44OTA2IEwxMDcwLjgyODEsMjQxLjQ2ODggQzEwNzAuODI4MSwyNDEuMDMxMyAxMDcwLjgxMjUsMjQwLjkwNjMgMTA3MC43MTg4LDI0MC43NSBDMTA3MC41NjI1LDI0MC40ODQ0IDEwNzAuMjgxMywyNDAuMzQzOCAxMDY5Ljk4NDQsMjQwLjM0MzggQzEwNjkuNjg3NSwyNDAuMzQzOCAxMDY5LjQ4NDQsMjQwLjQzNzUgMTA2OS4yNjU2LDI0MC43NSBMMTA2OS4wOTM4LDI0MC42NzE5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzAiIHg9IjEwODcuMjUiIHk9IjI0OS44NDY3Ij5SaXNlU3RhdGU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOTY1IiB4Mj0iMTI0NyIgeTE9IjI2MSIgeTI9IjI2MSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9Ijk2NSIgeDI9IjEyNDciIHkxPSIyNjkiIHkyPSIyNjkiLz48ZWxsaXBzZSBjeD0iOTc1IiBjeT0iMjgyLjY0ODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjA5IiB4PSI5ODQiIHk9IjI4NS45OTUxIj52b2lkIElucHV0QXR0YWNrQ29tbWFuZCgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iOTc1IiBjeT0iMjk4Ljk0NTMiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjE3IiB4PSI5ODQiIHk9IjMwMi4yOTIiPnZvaWQgQXR0YWNrQWN0aW9uQ29tcGxldGUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9Ijk3NSIgY3k9IjMxNS4yNDIyIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI0MiIgeD0iOTg0IiB5PSIzMTguNTg4OSI+dm9pZCBJbnB1dFhUaGFuVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9Ijk3NSIgY3k9IjMzMS41MzkxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzOCIgeD0iOTg0IiB5PSIzMzQuODg1NyI+dm9pZCBJbnB1dFhMZXNzVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9Ijk3NSIgY3k9IjM0Ny44MzU5IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5NiIgeD0iOTg0IiB5PSIzNTEuMTgyNiI+dm9pZCBJbnB1dEp1bXBDb21tYW5kKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI5NzUiIGN5PSIzNjQuMTMyOCIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTgiIHg9Ijk4NCIgeT0iMzY3LjQ3OTUiPnZvaWQgWVZlbG9jaXR5TGVzc1RocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSI5NzUiIGN5PSIzODAuNDI5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDIiIHg9Ijk4NCIgeT0iMzgzLjc3NjQiPnZvaWQgQ2hhcmFjdGVyVG91Y2hQbGFuZSgpOzwvdGV4dD48L2c+PCEtLWNsYXNzIEZhbGxTdGF0ZS0tPjxnIGlkPSJlbGVtX0ZhbGxTdGF0ZSI+PHJlY3QgY29kZUxpbmU9IjUxIiBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE2Mi4wNzgxIiBpZD0iRmFsbFN0YXRlIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyODQiIHg9IjEyODMiIHk9IjIyOSIvPjxlbGxpcHNlIGN4PSIxMzg4Ljc1IiBjeT0iMjQ1IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBhdGggZD0iTTEzOTEuMDkzOCwyNDAuNjcxOSBDMTM5MC4xNTYzLDI0MC4yMzQ0IDEzODkuNTYyNSwyNDAuMDkzOCAxMzg4LjY4NzUsMjQwLjA5MzggQzEzODYuMDYyNSwyNDAuMDkzOCAxMzg0LjA2MjUsMjQyLjE3MTkgMTM4NC4wNjI1LDI0NC44OTA2IEwxMzg0LjA2MjUsMjQ2LjAxNTYgQzEzODQuMDYyNSwyNDguNTkzOCAxMzg2LjE3MTksMjUwLjQ4NDQgMTM4OS4wNjI1LDI1MC40ODQ0IEMxMzkwLjI4MTMsMjUwLjQ4NDQgMTM5MS40Mzc1LDI1MC4xODc1IDEzOTIuMTg3NSwyNDkuNjQwNiBDMTM5Mi43NjU2LDI0OS4yMzQ0IDEzOTMuMDkzOCwyNDguNzgxMyAxMzkzLjA5MzgsMjQ4LjM5MDYgQzEzOTMuMDkzOCwyNDcuOTM3NSAxMzkyLjcwMzEsMjQ3LjU0NjkgMTM5Mi4yMzQ0LDI0Ny41NDY5IEMxMzkyLjAxNTYsMjQ3LjU0NjkgMTM5MS44MTI1LDI0Ny42MjUgMTM5MS42MjUsMjQ3LjgxMjUgQzEzOTEuMTcxOSwyNDguMjk2OSAxMzkxLjE3MTksMjQ4LjI5NjkgMTM5MC45ODQ0LDI0OC4zOTA2IEMxMzkwLjU2MjUsMjQ4LjY1NjMgMTM4OS44NzUsMjQ4Ljc4MTMgMTM4OS4xMDk0LDI0OC43ODEzIEMxMzg3LjA2MjUsMjQ4Ljc4MTMgMTM4NS43NjU2LDI0Ny42ODc1IDEzODUuNzY1NiwyNDUuOTg0NCBMMTM4NS43NjU2LDI0NC44OTA2IEMxMzg1Ljc2NTYsMjQzLjEwOTQgMTM4Ny4wMTU2LDI0MS43OTY5IDEzODguNzUsMjQxLjc5NjkgQzEzODkuMzI4MSwyNDEuNzk2OSAxMzg5LjkzNzUsMjQxLjk1MzEgMTM5MC40MDYzLDI0Mi4yMDMxIEMxMzkwLjg5MDYsMjQyLjQ4NDQgMTM5MS4wNjI1LDI0Mi43MDMxIDEzOTEuMTU2MywyNDMuMTA5NCBDMTM5MS4yMTg4LDI0My41MTU2IDEzOTEuMjUsMjQzLjY0MDYgMTM5MS4zOTA2LDI0My43NjU2IEMxMzkxLjUzMTMsMjQzLjkwNjMgMTM5MS43NjU2LDI0NC4wMTU2IDEzOTEuOTg0NCwyNDQuMDE1NiBDMTM5Mi4yNSwyNDQuMDE1NiAxMzkyLjUxNTYsMjQzLjg3NSAxMzkyLjY4NzUsMjQzLjY1NjMgQzEzOTIuNzk2OSwyNDMuNSAxMzkyLjgyODEsMjQzLjMxMjUgMTM5Mi44MjgxLDI0Mi44OTA2IEwxMzkyLjgyODEsMjQxLjQ2ODggQzEzOTIuODI4MSwyNDEuMDMxMyAxMzkyLjgxMjUsMjQwLjkwNjMgMTM5Mi43MTg4LDI0MC43NSBDMTM5Mi41NjI1LDI0MC40ODQ0IDEzOTIuMjgxMywyNDAuMzQzOCAxMzkxLjk4NDQsMjQwLjM0MzggQzEzOTEuNjg3NSwyNDAuMzQzOCAxMzkxLjQ4NDQsMjQwLjQzNzUgMTM5MS4yNjU2LDI0MC43NSBMMTM5MS4wOTM4LDI0MC42NzE5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjQiIHg9IjE0MDkuMjUiIHk9IjI0OS44NDY3Ij5GYWxsU3RhdGU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTI4NCIgeDI9IjE1NjYiIHkxPSIyNjEiIHkyPSIyNjEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMjg0IiB4Mj0iMTU2NiIgeTE9IjI2OSIgeTI9IjI2OSIvPjxlbGxpcHNlIGN4PSIxMjk0IiBjeT0iMjgyLjY0ODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjA5IiB4PSIxMzAzIiB5PSIyODUuOTk1MSI+dm9pZCBJbnB1dEF0dGFja0NvbW1hbmQoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjEyOTQiIGN5PSIyOTguOTQ1MyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTciIHg9IjEzMDMiIHk9IjMwMi4yOTIiPnZvaWQgQXR0YWNrQWN0aW9uQ29tcGxldGUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjEyOTQiIGN5PSIzMTUuMjQyMiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNDIiIHg9IjEzMDMiIHk9IjMxOC41ODg5Ij52b2lkIElucHV0WFRoYW5UaHJlc2hvbGRWYWx1ZSgpOzwvdGV4dD48ZWxsaXBzZSBjeD0iMTI5NCIgY3k9IjMzMS41MzkxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzOCIgeD0iMTMwMyIgeT0iMzM0Ljg4NTciPnZvaWQgSW5wdXRYTGVzc1RocmVzaG9sZFZhbHVlKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxMjk0IiBjeT0iMzQ3LjgzNTkiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk2IiB4PSIxMzAzIiB5PSIzNTEuMTgyNiI+dm9pZCBJbnB1dEp1bXBDb21tYW5kKCk7PC90ZXh0PjxlbGxpcHNlIGN4PSIxMjk0IiBjeT0iMzY0LjEzMjgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjU4IiB4PSIxMzAzIiB5PSIzNjcuNDc5NSI+dm9pZCBZVmVsb2NpdHlMZXNzVGhyZXNob2xkVmFsdWUoKTs8L3RleHQ+PGVsbGlwc2UgY3g9IjEyOTQiIGN5PSIzODAuNDI5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDIiIHg9IjEzMDMiIHk9IjM4My43NzY0Ij52b2lkIENoYXJhY3RlclRvdWNoUGxhbmUoKTs8L3RleHQ+PC9nPjwhLS1yZXZlcnNlIGxpbmsgSVN0YXRlIHRvIElkbGVTdGF0ZS0tPjxnIGlkPSJsaW5rX0lTdGF0ZV9JZGxlU3RhdGUiPjxwYXRoIGNvZGVMaW5lPSI2MSIgZD0iTTYzNC40NjIzLDEyNS45NTggQzUzNy4yODQzLDE1MC45OTYgNDIxLjM1OCwxODQuMzQ2IDMwOCwyMjkgQzMwMi4zOTQsMjMxLjIwOSAyOTYuNzE5LDIzMy41NDUgMjkxLjAxOCwyMzUuOTc2ICIgZmlsbD0ibm9uZSIgaWQ9IklTdGF0ZS1iYWNrdG8tSWRsZVN0YXRlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjY1MS44OTMsMTIxLjQ2Nyw2MzIuOTY1MywxMjAuMTQ3OCw2MzUuOTU5MywxMzEuNzY4Myw2NTEuODkzLDEyMS40NjciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIElTdGF0ZSB0byBSdW5TdGF0ZS0tPjxnIGlkPSJsaW5rX0lTdGF0ZV9SdW5TdGF0ZSI+PHBhdGggY29kZUxpbmU9IjYyIiBkPSJNNjU2LjExMzEsMTc5LjI2NjIgQzYyNy44NzcxLDE5OC43MzkyIDYxMi40OTQsMjA5LjM0OSA1ODQuMjUsMjI4LjgyOCAiIGZpbGw9Im5vbmUiIGlkPSJJU3RhdGUtYmFja3RvLVJ1blN0YXRlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjY3MC45MzEsMTY5LjA0Nyw2NTIuNzA2OCwxNzQuMzI2OSw2NTkuNTE5NSwxODQuMjA1NCw2NzAuOTMxLDE2OS4wNDciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIElTdGF0ZSB0byBBdHRhY2tTdGF0ZS0tPjxnIGlkPSJsaW5rX0lTdGF0ZV9BdHRhY2tTdGF0ZSI+PHBhdGggY29kZUxpbmU9IjYzIiBkPSJNNzg3LDE4Ny4wNDcgQzc4NywyMDYuNDU5IDc4NywyMDkuMjE4IDc4NywyMjguNjQ0ICIgZmlsbD0ibm9uZSIgaWQ9IklTdGF0ZS1iYWNrdG8tQXR0YWNrU3RhdGUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iNzg3LDE2OS4wNDcsNzgxLDE4Ny4wNDcsNzkzLDE4Ny4wNDcsNzg3LDE2OS4wNDciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIElTdGF0ZSB0byBSaXNlU3RhdGUtLT48ZyBpZD0ibGlua19JU3RhdGVfUmlzZVN0YXRlIj48cGF0aCBjb2RlTGluZT0iNjQiIGQ9Ik05MTcuODg2OSwxNzkuMjY2MiBDOTQ2LjEyMjksMTk4LjczOTIgOTYxLjUwNiwyMDkuMzQ5IDk4OS43NSwyMjguODI4ICIgZmlsbD0ibm9uZSIgaWQ9IklTdGF0ZS1iYWNrdG8tUmlzZVN0YXRlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjkwMy4wNjksMTY5LjA0Nyw5MTQuNDgwNSwxODQuMjA1NCw5MjEuMjkzMiwxNzQuMzI2OSw5MDMuMDY5LDE2OS4wNDciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIElTdGF0ZSB0byBGYWxsU3RhdGUtLT48ZyBpZD0ibGlua19JU3RhdGVfRmFsbFN0YXRlIj48cGF0aCBjb2RlTGluZT0iNjUiIGQ9Ik05MzkuNTM3OCwxMjUuOTU3OCBDMTAzNi43MjA4LDE1MC45OTU4IDExNTIuNjQsMTg0LjM0NiAxMjY2LDIyOSBDMTI3MS42MSwyMzEuMjA5IDEyNzcuMjgsMjMzLjU0NSAxMjgyLjk4LDIzNS45NzYgIiBmaWxsPSJub25lIiBpZD0iSVN0YXRlLWJhY2t0by1GYWxsU3RhdGUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iOTIyLjEwNywxMjEuNDY3LDkzOC4wNDA4LDEzMS43NjgxLDk0MS4wMzQ3LDEyMC4xNDc2LDkyMi4xMDcsMTIxLjQ2NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PC9nPjwhLS1TUkM9W3hQTDFRaUNtNDROdEZlTU0yUzhkSTNTWEs3M2ZlaEdjZkNqMWRZM0hpTUlpS0k2YWxOa1RFQXdqckRHLVdCTVNfb0txWnAtSWlPcHI0SElBeDhzMUtQbUpxUW5GUG1nSHNJaG1iWGRLbnl3TDlUWFlqVHhxU2dqaTVIamQ2eHFZUDhtQ3JfczdOOEZEVE9yVUVvaHNHNjdDejhwVUp2Y1VHYmNEdFVEelotSUt1VEY0OEppRERRWWN0VG01Zkx5OHg0TV9vQ2J0YVlXMnhxTE00MHV2bzJhSVNmZzVkNFQzcGtDWF9vU1lQcEVIeXdjeTFoajBrT1ZJVGhUbVFSYUNxc0J5Q2FEX3VsODhIMGtMTXJZa042dVZwaUROY2xSbFJiSmp0ZnNlRTlZeHNEcDVCZ2gtT2x5MV0tLT48L2c+PC9zdmc+">
<p>改进后的设计, 每个状态只需要专注自己的动作,
并且增加状态和动作不会影响到之前的代码, 这符合对扩展开放,对修改关闭.</p>
<h3 id="修改statemachine类">修改StateMachine类</h3>
<p>不再使用整数代表状态, 而是改为状态对象.</p>
<ul>
<li>原来的代码 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Idle = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Run = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Attack = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Rise = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Fall = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> State = Idle;</span><br></pre></td></tr></table></figure></li>
<li>修改后的代码 <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> IState IdleState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"><span class="keyword">public</span> IState RunState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"><span class="keyword">public</span> IState AttackState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"><span class="keyword">public</span> IState RiseState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"><span class="keyword">public</span> IState FallState { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> IState State;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">StateMachine</span>()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">this</span>.IdleState = <span class="keyword">new</span> IdleState(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.RunState = <span class="keyword">new</span> RunState(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.AttackState = <span class="keyword">new</span> AttackState(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.RiseState = <span class="keyword">new</span> RiseState(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.FallState = <span class="keyword">new</span> FallState(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.State = <span class="keyword">this</span>.IdleState;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="定义">定义</h2>
<p>状态模式, 允许对象在内部状态改变时改变它的行为,
对象看起来好像修改了它的类.</p>
<h2 id="构成">构成</h2>
<p><code>Context</code>: 维护对当前状态的引用,
并在状态发生改变的时候切换到新的状态.</p>
<p><code>State</code>:
定义一个<code>IState</code>接口或者<code>State</code>抽象类,
其中包含状态中的所有行为.
创建特定State类来实现<code>IState</code>接口或继承<code>State</code>抽象类,
在特定State类中实现这些行为(handle).</p>
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXMtYXNjaWkiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSIzNTlweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjMwNXB4O2hlaWdodDozNTlweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzMDUgMzU5IiB3aWR0aD0iMzA1cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48IS0tY2xhc3MgQ29udGV4dC0tPjxnIGlkPSJlbGVtX0NvbnRleHQiPjxyZWN0IGNvZGVMaW5lPSIxIiBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjY0LjI5NjkiIGlkPSJDb250ZXh0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDAiIHg9IjEwMiIgeT0iNyIvPjxlbGxpcHNlIGN4PSIxMjEuMDUiIGN5PSIyMyIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwYXRoIGQ9Ik0xMjMuMzkzOCwxOC42NzE5IEMxMjIuNDU2MywxOC4yMzQ0IDEyMS44NjI1LDE4LjA5MzggMTIwLjk4NzUsMTguMDkzOCBDMTE4LjM2MjUsMTguMDkzOCAxMTYuMzYyNSwyMC4xNzE5IDExNi4zNjI1LDIyLjg5MDYgTDExNi4zNjI1LDI0LjAxNTYgQzExNi4zNjI1LDI2LjU5MzggMTE4LjQ3MTksMjguNDg0NCAxMjEuMzYyNSwyOC40ODQ0IEMxMjIuNTgxMywyOC40ODQ0IDEyMy43Mzc1LDI4LjE4NzUgMTI0LjQ4NzUsMjcuNjQwNiBDMTI1LjA2NTYsMjcuMjM0NCAxMjUuMzkzOCwyNi43ODEzIDEyNS4zOTM4LDI2LjM5MDYgQzEyNS4zOTM4LDI1LjkzNzUgMTI1LjAwMzEsMjUuNTQ2OSAxMjQuNTM0NCwyNS41NDY5IEMxMjQuMzE1NiwyNS41NDY5IDEyNC4xMTI1LDI1LjYyNSAxMjMuOTI1LDI1LjgxMjUgQzEyMy40NzE5LDI2LjI5NjkgMTIzLjQ3MTksMjYuMjk2OSAxMjMuMjg0NCwyNi4zOTA2IEMxMjIuODYyNSwyNi42NTYzIDEyMi4xNzUsMjYuNzgxMyAxMjEuNDA5NCwyNi43ODEzIEMxMTkuMzYyNSwyNi43ODEzIDExOC4wNjU2LDI1LjY4NzUgMTE4LjA2NTYsMjMuOTg0NCBMMTE4LjA2NTYsMjIuODkwNiBDMTE4LjA2NTYsMjEuMTA5NCAxMTkuMzE1NiwxOS43OTY5IDEyMS4wNSwxOS43OTY5IEMxMjEuNjI4MSwxOS43OTY5IDEyMi4yMzc1LDE5Ljk1MzEgMTIyLjcwNjMsMjAuMjAzMSBDMTIzLjE5MDYsMjAuNDg0NCAxMjMuMzYyNSwyMC43MDMxIDEyMy40NTYzLDIxLjEwOTQgQzEyMy41MTg4LDIxLjUxNTYgMTIzLjU1LDIxLjY0MDYgMTIzLjY5MDYsMjEuNzY1NiBDMTIzLjgzMTMsMjEuOTA2MyAxMjQuMDY1NiwyMi4wMTU2IDEyNC4yODQ0LDIyLjAxNTYgQzEyNC41NSwyMi4wMTU2IDEyNC44MTU2LDIxLjg3NSAxMjQuOTg3NSwyMS42NTYzIEMxMjUuMDk2OSwyMS41IDEyNS4xMjgxLDIxLjMxMjUgMTI1LjEyODEsMjAuODkwNiBMMTI1LjEyODEsMTkuNDY4OCBDMTI1LjEyODEsMTkuMDMxMyAxMjUuMTEyNSwxOC45MDYzIDEyNS4wMTg4LDE4Ljc1IEMxMjQuODYyNSwxOC40ODQ0IDEyNC41ODEzLDE4LjM0MzggMTI0LjI4NDQsMTguMzQzOCBDMTIzLjk4NzUsMTguMzQzOCAxMjMuNzg0NCwxOC40Mzc1IDEyMy41NjU2LDE4Ljc1IEwxMjMuMzkzOCwxOC42NzE5IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTkiIHg9IjEzNS45NSIgeT0iMjcuODQ2NyI+Q29udGV4dDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMDMiIHgyPSIyMDEiIHkxPSIzOSIgeTI9IjM5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODgiIHg9IjEwOCIgeT0iNTUuOTk1MSI+SVN0YXRlIFN0YXRlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjEwMyIgeDI9IjIwMSIgeTE9IjYzLjI5NjkiIHkyPSI2My4yOTY5Ii8+PC9nPjwhLS1jbGFzcyBJU3RhdGUtLT48ZyBpZD0iZWxlbV9JU3RhdGUiPjxyZWN0IGNvZGVMaW5lPSI1IiBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjgwLjU5MzgiIGlkPSJJU3RhdGUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjExNCIgeD0iOTUiIHk9IjEzMSIvPjxlbGxpcHNlIGN4PSIxMjguNDUiIGN5PSIxNDciIGZpbGw9IiNCNEE3RTUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cGF0aCBkPSJNMTI5LjQwMzEsMTQzLjc4MTMgTDEzMS4xMjE5LDE0My43ODEzIEMxMzEuNTEyNSwxNDMuNzgxMyAxMzEuNywxNDMuNzUgMTMxLjgyNSwxNDMuNjcxOSBDMTMyLjA5MDYsMTQzLjUxNTYgMTMyLjIzMTMsMTQzLjIzNDQgMTMyLjIzMTMsMTQyLjkzNzUgQzEzMi4yMzEzLDE0Mi42NzE5IDEzMi4xMjE5LDE0Mi40MDYzIDEzMS44ODc1LDE0Mi4yMzQ0IEMxMzEuNzE1NiwxNDIuMTI1IDEzMS41NzUsMTQyLjA5MzggMTMxLjEyMTksMTQyLjA5MzggTDEyNS45ODEyLDE0Mi4wOTM4IEMxMjUuNTQzNywxNDIuMDkzOCAxMjUuNDE4NywxNDIuMTA5NCAxMjUuMjYyNSwxNDIuMjAzMSBDMTI1LjAxMjUsMTQyLjM1OTQgMTI0Ljg1NjIsMTQyLjY1NjMgMTI0Ljg1NjIsMTQyLjkzNzUgQzEyNC44NTYyLDE0My4yMTg4IDEyNC45OTY5LDE0My40Njg4IDEyNS4yMTU2LDE0My42NDA2IEMxMjUuMzcxOSwxNDMuNzUgMTI1LjU1OTQsMTQzLjc4MTMgMTI1Ljk4MTIsMTQzLjc4MTMgTDEyNy43LDE0My43ODEzIEwxMjcuNywxNTAuMjk2OSBMMTI1Ljk4MTIsMTUwLjI5NjkgQzEyNS41NDM3LDE1MC4yOTY5IDEyNS40MTg3LDE1MC4zMTI1IDEyNS4yNjI1LDE1MC40MjE5IEMxMjUuMDEyNSwxNTAuNTc4MSAxMjQuODU2MiwxNTAuODU5NCAxMjQuODU2MiwxNTEuMTU2MyBDMTI0Ljg1NjIsMTUxLjQwNjMgMTI0Ljk5NjksMTUxLjY3MTkgMTI1LjIxNTYsMTUxLjgyODEgQzEyNS4zNzE5LDE1MS45NTMxIDEyNS41NzUsMTUyIDEyNS45ODEyLDE1MiBMMTMxLjEyMTksMTUyIEMxMzEuODcxOSwxNTIgMTMyLjIzMTMsMTUxLjcxODggMTMyLjIzMTMsMTUxLjE1NjMgQzEzMi4yMzEzLDE1MC44NzUgMTMyLjEyMTksMTUwLjYyNSAxMzEuODg3NSwxNTAuNDUzMSBDMTMxLjcxNTYsMTUwLjMyODEgMTMxLjU3NSwxNTAuMjk2OSAxMzEuMTIxOSwxNTAuMjk2OSBMMTI5LjQwMzEsMTUwLjI5NjkgTDEyOS40MDMxLDE0My43ODEzIFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MSIgeD0iMTQ2LjU1IiB5PSIxNTEuODQ2NyI+SVN0YXRlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9Ijk2IiB4Mj0iMjA4IiB5MT0iMTYzIiB5Mj0iMTYzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iOTYiIHgyPSIyMDgiIHkxPSIxNzEiIHkyPSIxNzEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIiIHg9IjEwMSIgeT0iMTg3Ljk5NTEiPnZvaWQgSGFuZGxlMSgpPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMSIgeD0iMTAxIiB5PSIyMDQuMjkyIj52b2lkIEhhbmRsZTIoKTwvdGV4dD48L2c+PCEtLWNsYXNzIFN0YXRlQS0tPjxnIGlkPSJlbGVtX1N0YXRlQSI+PHJlY3QgY29kZUxpbmU9IjEwIiBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjgwLjU5MzgiIGlkPSJTdGF0ZUEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyOCIgeD0iNyIgeT0iMjcyIi8+PGVsbGlwc2UgY3g9IjQyLjciIGN5PSIyODgiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cGF0aCBkPSJNNDUuMDQzOCwyODMuNjcxOSBDNDQuMTA2MywyODMuMjM0NCA0My41MTI1LDI4My4wOTM4IDQyLjYzNzUsMjgzLjA5MzggQzQwLjAxMjUsMjgzLjA5MzggMzguMDEyNSwyODUuMTcxOSAzOC4wMTI1LDI4Ny44OTA2IEwzOC4wMTI1LDI4OS4wMTU2IEMzOC4wMTI1LDI5MS41OTM4IDQwLjEyMTksMjkzLjQ4NDQgNDMuMDEyNSwyOTMuNDg0NCBDNDQuMjMxMywyOTMuNDg0NCA0NS4zODc1LDI5My4xODc1IDQ2LjEzNzUsMjkyLjY0MDYgQzQ2LjcxNTYsMjkyLjIzNDQgNDcuMDQzOCwyOTEuNzgxMyA0Ny4wNDM4LDI5MS4zOTA2IEM0Ny4wNDM4LDI5MC45Mzc1IDQ2LjY1MzEsMjkwLjU0NjkgNDYuMTg0NCwyOTAuNTQ2OSBDNDUuOTY1NiwyOTAuNTQ2OSA0NS43NjI1LDI5MC42MjUgNDUuNTc1LDI5MC44MTI1IEM0NS4xMjE5LDI5MS4yOTY5IDQ1LjEyMTksMjkxLjI5NjkgNDQuOTM0NCwyOTEuMzkwNiBDNDQuNTEyNSwyOTEuNjU2MyA0My44MjUsMjkxLjc4MTMgNDMuMDU5NCwyOTEuNzgxMyBDNDEuMDEyNSwyOTEuNzgxMyAzOS43MTU2LDI5MC42ODc1IDM5LjcxNTYsMjg4Ljk4NDQgTDM5LjcxNTYsMjg3Ljg5MDYgQzM5LjcxNTYsMjg2LjEwOTQgNDAuOTY1NiwyODQuNzk2OSA0Mi43LDI4NC43OTY5IEM0My4yNzgxLDI4NC43OTY5IDQzLjg4NzUsMjg0Ljk1MzEgNDQuMzU2MywyODUuMjAzMSBDNDQuODQwNiwyODUuNDg0NCA0NS4wMTI1LDI4NS43MDMxIDQ1LjEwNjMsMjg2LjEwOTQgQzQ1LjE2ODgsMjg2LjUxNTYgNDUuMiwyODYuNjQwNiA0NS4zNDA2LDI4Ni43NjU2IEM0NS40ODEzLDI4Ni45MDYzIDQ1LjcxNTYsMjg3LjAxNTYgNDUuOTM0NCwyODcuMDE1NiBDNDYuMiwyODcuMDE1NiA0Ni40NjU2LDI4Ni44NzUgNDYuNjM3NSwyODYuNjU2MyBDNDYuNzQ2OSwyODYuNSA0Ni43NzgxLDI4Ni4zMTI1IDQ2Ljc3ODEsMjg1Ljg5MDYgTDQ2Ljc3ODEsMjg0LjQ2ODggQzQ2Ljc3ODEsMjg0LjAzMTMgNDYuNzYyNSwyODMuOTA2MyA0Ni42Njg4LDI4My43NSBDNDYuNTEyNSwyODMuNDg0NCA0Ni4yMzEzLDI4My4zNDM4IDQ1LjkzNDQsMjgzLjM0MzggQzQ1LjYzNzUsMjgzLjM0MzggNDUuNDM0NCwyODMuNDM3NSA0NS4yMTU2LDI4My43NSBMNDUuMDQzOCwyODMuNjcxOSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUwIiB4PSI2MS4zIiB5PSIyOTIuODQ2NyI+U3RhdGVBPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSIxMzQiIHkxPSIzMDQiIHkyPSIzMDQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iMTM0IiB5MT0iMzEyIiB5Mj0iMzEyIi8+PGVsbGlwc2UgY3g9IjE4IiBjeT0iMzI1LjY0ODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyIiB4PSIyNyIgeT0iMzI4Ljk5NTEiPnZvaWQgSGFuZGxlMSgpPC90ZXh0PjxlbGxpcHNlIGN4PSIxOCIgY3k9IjM0MS45NDUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMSIgeD0iMjciIHk9IjM0NS4yOTIiPnZvaWQgSGFuZGxlMigpPC90ZXh0PjwvZz48IS0tY2xhc3MgU3RhdGVCLS0+PGcgaWQ9ImVsZW1fU3RhdGVCIj48cmVjdCBjb2RlTGluZT0iMTUiIGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iODAuNTkzOCIgaWQ9IlN0YXRlQiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI4IiB4PSIxNzAiIHk9IjI3MiIvPjxlbGxpcHNlIGN4PSIyMDUuNyIgY3k9IjI4OCIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwYXRoIGQ9Ik0yMDguMDQzOCwyODMuNjcxOSBDMjA3LjEwNjMsMjgzLjIzNDQgMjA2LjUxMjUsMjgzLjA5MzggMjA1LjYzNzUsMjgzLjA5MzggQzIwMy4wMTI1LDI4My4wOTM4IDIwMS4wMTI1LDI4NS4xNzE5IDIwMS4wMTI1LDI4Ny44OTA2IEwyMDEuMDEyNSwyODkuMDE1NiBDMjAxLjAxMjUsMjkxLjU5MzggMjAzLjEyMTksMjkzLjQ4NDQgMjA2LjAxMjUsMjkzLjQ4NDQgQzIwNy4yMzEzLDI5My40ODQ0IDIwOC4zODc1LDI5My4xODc1IDIwOS4xMzc1LDI5Mi42NDA2IEMyMDkuNzE1NiwyOTIuMjM0NCAyMTAuMDQzOCwyOTEuNzgxMyAyMTAuMDQzOCwyOTEuMzkwNiBDMjEwLjA0MzgsMjkwLjkzNzUgMjA5LjY1MzEsMjkwLjU0NjkgMjA5LjE4NDQsMjkwLjU0NjkgQzIwOC45NjU2LDI5MC41NDY5IDIwOC43NjI1LDI5MC42MjUgMjA4LjU3NSwyOTAuODEyNSBDMjA4LjEyMTksMjkxLjI5NjkgMjA4LjEyMTksMjkxLjI5NjkgMjA3LjkzNDQsMjkxLjM5MDYgQzIwNy41MTI1LDI5MS42NTYzIDIwNi44MjUsMjkxLjc4MTMgMjA2LjA1OTQsMjkxLjc4MTMgQzIwNC4wMTI1LDI5MS43ODEzIDIwMi43MTU2LDI5MC42ODc1IDIwMi43MTU2LDI4OC45ODQ0IEwyMDIuNzE1NiwyODcuODkwNiBDMjAyLjcxNTYsMjg2LjEwOTQgMjAzLjk2NTYsMjg0Ljc5NjkgMjA1LjcsMjg0Ljc5NjkgQzIwNi4yNzgxLDI4NC43OTY5IDIwNi44ODc1LDI4NC45NTMxIDIwNy4zNTYzLDI4NS4yMDMxIEMyMDcuODQwNiwyODUuNDg0NCAyMDguMDEyNSwyODUuNzAzMSAyMDguMTA2MywyODYuMTA5NCBDMjA4LjE2ODgsMjg2LjUxNTYgMjA4LjIsMjg2LjY0MDYgMjA4LjM0MDYsMjg2Ljc2NTYgQzIwOC40ODEzLDI4Ni45MDYzIDIwOC43MTU2LDI4Ny4wMTU2IDIwOC45MzQ0LDI4Ny4wMTU2IEMyMDkuMiwyODcuMDE1NiAyMDkuNDY1NiwyODYuODc1IDIwOS42Mzc1LDI4Ni42NTYzIEMyMDkuNzQ2OSwyODYuNSAyMDkuNzc4MSwyODYuMzEyNSAyMDkuNzc4MSwyODUuODkwNiBMMjA5Ljc3ODEsMjg0LjQ2ODggQzIwOS43NzgxLDI4NC4wMzEzIDIwOS43NjI1LDI4My45MDYzIDIwOS42Njg4LDI4My43NSBDMjA5LjUxMjUsMjgzLjQ4NDQgMjA5LjIzMTMsMjgzLjM0MzggMjA4LjkzNDQsMjgzLjM0MzggQzIwOC42Mzc1LDI4My4zNDM4IDIwOC40MzQ0LDI4My40Mzc1IDIwOC4yMTU2LDI4My43NSBMMjA4LjA0MzgsMjgzLjY3MTkgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1MCIgeD0iMjI0LjMiIHk9IjI5Mi44NDY3Ij5TdGF0ZUI8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTcxIiB4Mj0iMjk3IiB5MT0iMzA0IiB5Mj0iMzA0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTcxIiB4Mj0iMjk3IiB5MT0iMzEyIiB5Mj0iMzEyIi8+PGVsbGlwc2UgY3g9IjE4MSIgY3k9IjMyNS42NDg0IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMiIgeD0iMTkwIiB5PSIzMjguOTk1MSI+dm9pZCBIYW5kbGUxKCk8L3RleHQ+PGVsbGlwc2UgY3g9IjE4MSIgY3k9IjM0MS45NDUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMSIgeD0iMTkwIiB5PSIzNDUuMjkyIj52b2lkIEhhbmRsZTIoKTwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBDb250ZXh0IHRvIElTdGF0ZS0tPjxnIGlkPSJsaW5rX0NvbnRleHRfSVN0YXRlIj48cGF0aCBjb2RlTGluZT0iMjAiIGQ9Ik0xNTIsODMuMjU4IEMxNTIsMTAxLjA1NCAxNTIsMTExLjUyOSAxNTIsMTMwLjU4OSAiIGZpbGw9Im5vbmUiIGlkPSJDb250ZXh0LWJhY2t0by1JU3RhdGUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTUyLDcxLjI1OCwxNDgsNzcuMjU4LDE1Miw4My4yNTgsMTU2LDc3LjI1OCwxNTIsNzEuMjU4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48L2c+PCEtLXJldmVyc2UgbGluayBJU3RhdGUgdG8gU3RhdGVBLS0+PGcgaWQ9ImxpbmtfSVN0YXRlX1N0YXRlQSI+PHBhdGggY29kZUxpbmU9IjIxIiBkPSJNMTE5LjcyNjIsMjI3Ljg4NCBDMTA4Ljg4MDIsMjQ2LjQ5NiAxMDUuMDYwOSwyNTMuMDQ5OSA5NC4yMTQ3LDI3MS42NjI0ICIgZmlsbD0ibm9uZSIgaWQ9IklTdGF0ZS1iYWNrdG8tU3RhdGVBIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjEyOC43ODksMjEyLjMzMiwxMTQuNTQyMiwyMjQuODYzMSwxMjQuOTEwMiwyMzAuOTA1LDEyOC43ODksMjEyLjMzMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgSVN0YXRlIHRvIFN0YXRlQi0tPjxnIGlkPSJsaW5rX0lTdGF0ZV9TdGF0ZUIiPjxwYXRoIGNvZGVMaW5lPSIyMiIgZD0iTTE4NC42NDQsMjI3LjgzNTIgQzE5NS42MjQsMjQ2LjQ0NzIgMTk5LjUxOSwyNTMuMDQ5OSAyMTAuNDk5LDI3MS42NjI0ICIgZmlsbD0ibm9uZSIgaWQ9IklTdGF0ZS1iYWNrdG8tU3RhdGVCIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjE3NS40OTgsMjEyLjMzMiwxNzkuNDc2MywyMzAuODgzOSwxODkuODExOCwyMjQuNzg2NiwxNzUuNDk4LDIxMi4zMzIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwvZz48IS0tU1JDPVtJeXY5QjJ2TVNDeEZBcWNqQTU2ZXZiODAwaV9XYWlJSUwwS21vTE5CblBLOWIybkFJcW5FWFNiMGI5TmJQd09lVTJKY2ZVSWE2Y2ZlZVdpUDBPTTBVZkYxdmVFckVLQnJRTUZKZ09yVmhuRWZVYzQtcWpCTFhSZ1EyLWZ1Y25nVzRDSDFjNDlFMDAwMF0tLT48L2c+PC9zdmc+">

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/11/27/%E6%98%BE%E5%BC%8F%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E5%8E%9F%E5%88%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/27/%E6%98%BE%E5%BC%8F%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E5%8E%9F%E5%88%99/" class="post-title-link" itemprop="url">显式依赖关系原则</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-11-27 10:56:09" itemprop="dateCreated datePublished" datetime="2023-11-27T10:56:09+08:00">2023-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-30 14:02:24" itemprop="dateModified" datetime="2023-11-30T14:02:24+08:00">2023-11-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="explicit-dependencies-principle">Explicit Dependencies
Principle</h1>
<h2 id="定义">定义</h2>
<p>方法和类应明确要求(通常通过方法参数或构造函数参数)它们所需的任何协作对象,
以便正常运行.</p>
<h2 id="依赖项">依赖项</h2>
<p>如果您的类需要其他类来执行其操作, 那么这些其他类就是依赖项.</p>
<h2 id="隐式依赖项">隐式依赖项</h2>
<p>如果这些依赖项仅存在于类内部的代码中, 而不存在于其公共接口中,
则它们是隐式的.</p>
<h2 id="显式依赖项">显式依赖项</h2>
<p>对于类的依赖项, 显示依赖项最常出现在对象的构造函数中;
对于更多本地依赖项, 显式依赖项通常出现在特定方法的参数列表中.</p>
<h2 id="隐式依赖的缺点">隐式依赖的缺点</h2>
<p>隐式依赖关系的类比具有显式依赖关系的类的维护成本更高. 它们更难测试,
因为他们与协作者的耦合更紧密. 更难以分析副作用,
因为必须搜索整个类的代码库以查找对象实例化或对静态方法的调用.
与合作者的耦合更紧密, 导致设计更加僵化和脆弱.</p>
<h2 id="显式依赖的优点">显式依赖的优点</h2>
<p>非常清楚的说明了执行特定职能所需的条件.
它们倾向于遵循<code>最小意外原则</code>, 减少修改代码影响的范围.
无论是在生产中还是在测试或debug过程中,
显式依赖项都可以轻松的替换为其他实现.
这使得它们更容易维护并且更愿意改变.</p>
<h2 id="示例">示例</h2>
<p>示例1-隐式依赖: <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Context</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User CurrentUser;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> User <span class="title">GetCurrentUser</span>()</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> CurrentUser;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Login</span>()</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">$"用户:<span class="subst">{Context.GetCurrentUser().Name}</span> 已登陆!"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">var</span> user = <span class="keyword">new</span> User</span><br><span class="line">        {</span><br><span class="line">            Name = <span class="string">"A"</span></span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">        Context.CurrentUser = user;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> client = <span class="keyword">new</span> Client();</span><br><span class="line">        Console.WriteLine(client.Login());</span><br><span class="line">        Console.ReadLine();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>示例1中, Client对User对象的依赖是在Context静态类中,
并没有在公共接口中, 是隐式依赖项. 在Main中调用的时候,
并不能直观的了解到client和创建的user有什么联系, 需要查看内部具体的代码,
代码间的隔离性很差.</p>
<p>示例2-显式依赖: <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Login</span>(<span class="params">User user</span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">$"用户:<span class="subst">{user.Name}</span> 已登陆!"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">var</span> user = <span class="keyword">new</span> User()</span><br><span class="line">        {</span><br><span class="line">            Name = <span class="string">"A"</span></span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> client = <span class="keyword">new</span> Client();</span><br><span class="line">        Console.WriteLine(client2.Login(user));</span><br><span class="line">        Console.ReadLine();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>在示例2中, 对于示例1进行了改进.
不再将user对象的引用存储在Context中去隐式传递依赖项,
而是直接将user作为<code>client.Login</code>方法的参数传递依赖项,
能更加直观的看出关联关系,
且对于<code>Login</code>方法内部的代码也更加具有隔离性.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/FreeGoStudio/DevArt/tree/main/ExplicitDependenciesPrinciple">相关源码</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/06/06/Markdown%E4%B8%AD%E5%B5%8C%E5%85%A5PlantUML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/06/Markdown%E4%B8%AD%E5%B5%8C%E5%85%A5PlantUML/" class="post-title-link" itemprop="url">Markdown中嵌入PlantUML</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-06 20:35:53" itemprop="dateCreated datePublished" datetime="2023-06-06T20:35:53+08:00">2023-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-27 11:01:24" itemprop="dateModified" datetime="2023-11-27T11:01:24+08:00">2023-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="应用场景">应用场景</h2>
<p>使用VSCode阅读Markdown文件，希望能够直接内嵌PlantUML，并能在VSCode中阅读时能渲染PlantUML。</p>
<h2 id="实现方法">实现方法</h2>
<ol type="1">
<li>在VSCode中安装<code>PlantUML</code>插件。</li>
<li>进入VSCode设置，选择“在settings.json中编辑”。</li>
<li>在打开的json文件中末尾加上 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">"plantuml.render"</span><span class="punctuation">:</span> <span class="string">"PlantUMLServer"</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">"plantuml.server"</span><span class="punctuation">:</span> <span class="string">"http://www.plantuml.com/plantuml"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>server配置的是官方PlantUML的解析服务器地址。如需要自建PlantUML解析服务器：<a target="_blank" rel="noopener" href="https://github.com/plantuml/plantuml-server">GitHub项目地址</a></li>
</ul></li>
<li>在VSCode中按下快捷键<code>Ctrl+Shift+P</code>显示显示命令面板，输入<code>Markdown:Change Preview Security Settings</code>，选择<code>Allow insecure content 允许不安全内容</code>。</li>
<li>在你的Markdown文件中,使用以下格式就能嵌入PlantUML <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">```plantuml</span><br><span class="line">Class01 &lt;|-- Class02</span><br><span class="line">Class03 *-- Class04</span><br><span class="line">Class05 o-- Class06</span><br><span class="line">Class07 .. Class08</span><br><span class="line">Class09 -- Class10</span><br><span class="line">```</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/03/30/C-%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%96%B9%E6%B3%95%E9%81%BF%E5%85%8D%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/03/30/C-%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%96%B9%E6%B3%95%E9%81%BF%E5%85%8D%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" class="post-title-link" itemprop="url">C# 实现接口的方法避免返回类型进行数据类型转换</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-03-30 09:53:30" itemprop="dateCreated datePublished" datetime="2023-03-30T09:53:30+08:00">2023-03-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-27 13:52:18" itemprop="dateModified" datetime="2023-11-27T13:52:18+08:00">2023-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天在看C#的<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/dotnet/api/system.collections.ienumerator?view=net-7.0">IEnumerator
接口</a>的官方文档，看到在实现IEnumerable接口的GetEnumerator()方法时额外写一个同名同参的方法。感到有些疑惑，为什么要这样写，这样写的好处在哪里。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">People</span> : <span class="title">IEnumerable</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">private</span> Person[] _people;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">People</span>(<span class="params">Person[] pArray</span>)</span></span><br><span class="line">    {</span><br><span class="line">        _people = <span class="keyword">new</span> Person[pArray.Length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; pArray.Length; i++)</span><br><span class="line">        {</span><br><span class="line">            _people[i] = pArray[i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment">// Implementation for the GetEnumerator method.</span></span><br><span class="line">    IEnumerator IEnumerable.GetEnumerator()</span><br><span class="line">    {</span><br><span class="line">       <span class="keyword">return</span> (IEnumerator) GetEnumerator();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PeopleEnum <span class="title">GetEnumerator</span>()</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PeopleEnum(_people);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ul>
<li>注：PeopleEnum类实现了IEnumerator接口</li>
<li>IEnumerable.GetEnumerator()是显式实现接口成员，必须是默认访问修饰符。</li>
</ul>
<p>在我实现接口的时候，我通常会直接隐式实现接口成员。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">People</span> : <span class="title">IEnumerable</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">private</span> Person[] _people;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">People</span>(<span class="params">Person[] pArray</span>)</span></span><br><span class="line">    {</span><br><span class="line">        _people = <span class="keyword">new</span> Person[pArray.Length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; pArray.Length; i++)</span><br><span class="line">        {</span><br><span class="line">            _people[i] = pArray[i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerator <span class="title">GetEnumerator</span>()</span></span><br><span class="line">    {</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> PeopleEnum(_people);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ul>
<li>C# 要求隐式实现接口成员必须是public</li>
</ul>
<p>但是这样做隐式实现接口成员在返回类型是可继承或接口，且外部调用时需要使用派生后的扩展的方法就需要进行类型转换。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">People people = <span class="keyword">new</span> People(<span class="literal">null</span>);</span><br><span class="line">PeopleEnum enum1 = (PeopleEnum)people.GetEnumerator();</span><br><span class="line"><span class="built_in">int</span> enumLength = enum1.Length();</span><br></pre></td></tr></table></figure>
<p>而使用官方文档那样写，调用扩展的方法就不需要进行类型转换。
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">People people = <span class="keyword">new</span> People(<span class="literal">null</span>);</span><br><span class="line">PeopleEnum enum1 = people.GetEnumerator();</span><br><span class="line"><span class="built_in">int</span> enumLength = enum1.Length();</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/03/26/C-%E4%B8%AD%E4%BD%BF%E7%94%A8BeachmarkDotNet%E8%BF%9B%E8%A1%8C%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/03/26/C-%E4%B8%AD%E4%BD%BF%E7%94%A8BeachmarkDotNet%E8%BF%9B%E8%A1%8C%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">C#中使用BeachmarkDotNet进行基准测试</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-03-26 01:18:10" itemprop="dateCreated datePublished" datetime="2023-03-26T01:18:10+08:00">2023-03-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-27 10:59:49" itemprop="dateModified" datetime="2023-11-27T10:59:49+08:00">2023-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="安装">安装</h1>
<ol type="1">
<li>在VS2022中选择菜单项<code>工具</code>-&gt;<code>NuGet包管理</code>-&gt;<code>管理解决方案的NuGet程序包</code></li>
<li>在打开的窗口中选择<code>浏览</code>-&gt;搜索<code>BenchmarkDotNet</code>-&gt;选择搜索结果中的<code>BenchmarkDotNet</code>-&gt;点击<code>安装</code></li>
<li>所有弹出框都选择确定</li>
<li>等待完成安装</li>
</ol>
<h1 id="使用">使用</h1>
<ol type="1">
<li>创建一个的类，里面存放需要测试的函数<code>Test1()</code>和<code>Test2()</code>。
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BenchmarkTest</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test1</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test1"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test2</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test2"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
<li>对需要测试的函数增加<code>[Benchmark]</code>特性。
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BenchmarkTest</span></span><br><span class="line">{</span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test1</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test1"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test2</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test2"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
<li>在<code>main</code>函数中使用<code>BenchmarkRunner.Run&lt;BenchmarkTest&gt;()</code>，将会调用<code>BenchmarkTest</code>类中的待测试的函数。</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    BenchmarkRunner.Run&lt;BenchmarkTest&gt;();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ol start="4" type="1">
<li>（可选）如果需要查看内存使用可以在class加上<code>[MemoryDiagnoser]</code>特性。</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">MemoryDiagnoser</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BenchmarkTest</span></span><br><span class="line">{</span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test1</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test1"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test2</span>()</span></span><br><span class="line">    {</span><br><span class="line">        Console.WriteLine(<span class="string">"Test2"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ol start="5" type="1">
<li>将解决方案配置由<code>Debug</code>改为<code>Release</code>。</li>
<li>点击界面按钮<code>开始执行（不调试）</code>或者快捷键<code>Ctrl+F5</code>，开始执行。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/03/24/C-Struct%E7%9A%84%E5%80%BC%E6%8B%B7%E8%B4%9D%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/03/24/C-Struct%E7%9A%84%E5%80%BC%E6%8B%B7%E8%B4%9D%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">C# Struct的值拷贝的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-03-24 21:37:29" itemprop="dateCreated datePublished" datetime="2023-03-24T21:37:29+08:00">2023-03-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-27 13:52:34" itemprop="dateModified" datetime="2023-11-27T13:52:34+08:00">2023-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="概述">概述</h1>
<p>C#中的Struct是值类型数据结构，在使用时常发生值拷贝。</p>
<h3 id="公用代码">公用代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> ChildStruct</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Value;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ChildClass</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Value;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> ParentStruct</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Value;</span><br><span class="line">    <span class="keyword">public</span> ChildStruct ChildStruct;</span><br><span class="line">    <span class="keyword">public</span> ChildClass ChildClass;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="作为参数进行值拷贝">作为参数进行值拷贝</h2>
<h3 id="示例代码">示例代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    parentStruct1.Value = <span class="number">1</span>;</span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line"></span><br><span class="line">    CopyValue1(parentStruct1);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CopyValue1</span>(<span class="params">ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct.Value = <span class="number">2</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="输出结果">输出结果：</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<h3 id="分析">分析</h3>
<p>函数<code>CopyValue1</code>中对传入参数<code>parentStruct</code>的修改，并不能影响函数外<code>parentStruct1</code>的值。所以认为<code>Struct</code>作为传入参数发生了值拷贝，函数内修改的与函数修改的<code>Struct</code>并非同一个引用。</p>
<h3 id="改良">改良</h3>
<p>使用<code>ref</code>进行传参，这样不再传递<code>Struct</code>的值，而是传递<code>Struct</code>的引用来避免值拷贝。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    parentStruct1.Value = <span class="number">1</span>;</span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line"></span><br><span class="line">    CopyValue1(<span class="keyword">ref</span> parentStruct1);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CopyValue1</span>(<span class="params"><span class="keyword">ref</span> ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct.Value = <span class="number">2</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<h2 id="return进行值拷贝">return进行值拷贝</h2>
<h3 id="示例代码-1">示例代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    parentStruct1.Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    ParentStruct parentStruct2 = CopyValue2(<span class="keyword">ref</span> parentStruct1);</span><br><span class="line">    parentStruct2.Value = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct2.Value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ParentStruct <span class="title">CopyValue2</span>(<span class="params"><span class="keyword">ref</span> ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct.Value = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> parentStruct;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="输出结果-1">输出结果</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h3 id="分析-1">分析</h3>
<p>从之前的示例可以得知ref传参传递的是引用，因此认为函数内的<code>parentStruct</code>变量的与函数外的<code>parentStruct1</code>变量是同一个引用。</p>
<p>变量<code>parentStruct2</code>接收<code>CopyValue2</code>的返回值，并对<code>parentStruct2</code>中的值进行修改，但输出的结果发现<code>parentStruct1</code>中的值并未发生修改。</p>
<p>可以得出结论：函数的返回值也是值传递，并非引用传递。</p>
<h3 id="改良-1">改良</h3>
<p>使用<code>ref</code>将返回的类型为引用类型。接收的变量也需要使用<code>ref</code>修饰。来避免值拷贝。
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    parentStruct1.Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">ref</span> ParentStruct parentStruct2 = <span class="function"><span class="keyword">ref</span> <span class="title">CopyValue1</span>(<span class="params"><span class="keyword">ref</span> parentStruct1</span>)</span>;</span><br><span class="line">    parentStruct2.Value = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct1.Value);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(parentStruct2.Value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">ref</span> ParentStruct <span class="title">CopyValue1</span>(<span class="params"><span class="keyword">ref</span> ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct.Value = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">ref</span> parentStruct;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h2 id="struct类型数组元素存为变量时进行值拷贝">Struct类型数组元素存为变量时进行值拷贝</h2>
<h3 id="示例代码-2">示例代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct[] structs = <span class="keyword">new</span> ParentStruct[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    structs[<span class="number">0</span>] = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    structs[<span class="number">0</span>].Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(structs[<span class="number">0</span>].Value);</span><br><span class="line"></span><br><span class="line">    ParentStruct parentStruct0 = structs[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    parentStruct0.Value = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(structs[<span class="number">0</span>].Value);</span><br><span class="line">    Console.WriteLine(parentStruct0.Value);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="输出结果-2">输出结果</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<h3 id="分析-2">分析</h3>
<p>由输出的结果可以发现对于将<code>Struct数组</code>的元素存为变量<code>parentStruct0</code>后，对于<code>parentStruct0</code>的修改并不会改变数组中元素内的值，所以拷贝的是值而不是引用。</p>
<h3 id="改良-2">改良</h3>
<p>使用<code>ref</code>修饰变量，这样变量存储的是数组元素的引用来避免值拷贝。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct[] structs = <span class="keyword">new</span> ParentStruct[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    structs[<span class="number">0</span>] = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    structs[<span class="number">0</span>].Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(structs[<span class="number">0</span>].Value);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">ref</span> ParentStruct parentStruct0 = <span class="keyword">ref</span> structs[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    parentStruct0.Value = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(structs[<span class="number">0</span>].Value);</span><br><span class="line">    Console.WriteLine(parentStruct0.Value);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="函数内创建并返回的struct避免值拷贝">函数内创建并返回的Struct避免值拷贝</h2>
<h3 id="示例代码-3">示例代码</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = CreateParentStruct();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ParentStruct <span class="title">CreateParentStruct</span>()</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">    <span class="keyword">return</span> parentStruct;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="分析-3">分析</h3>
<p>从之前的结论可以得知函数返回值是值拷贝，所以使用<code>out</code>关键词来避免值拷贝</p>
<h3 id="改良-3">改良</h3>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1;</span><br><span class="line">    CreateParentStruct(<span class="keyword">out</span> parentStruct1);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CreateParentStruct</span>(<span class="params"><span class="keyword">out</span> ParentStruct parentStruct</span>)</span></span><br><span class="line">{</span><br><span class="line">    parentStruct = <span class="keyword">new</span> ParentStruct();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="struct内的struct类型成员与class类型成员">Struct内的Struct类型成员与Class类型成员</h2>
<p><code>ParentStruct</code>是个<code>Struct</code>，内部有<code>Struct</code>类型成员变量<code>ChildStruct</code>和<code>Class</code>类型成员变量<code>ChildClass</code>。分别创建这两种类型的变量，初始化<code>Value</code>的值，并赋值给<code>ParentStruct</code>变量对应的成员。两种类型的变量的<code>Value</code>值，观察<code>ParentStruct</code>变量内部对应成员值的变化。代码如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">{</span><br><span class="line">    ParentStruct parentStruct1 = <span class="keyword">new</span> ParentStruct();</span><br><span class="line"></span><br><span class="line">    ChildStruct childStruct1 = <span class="keyword">new</span> ChildStruct();</span><br><span class="line">    childStruct1.Value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    parentStruct1.ChildStruct = childStruct1;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">$"childStruct1.Value:<span class="subst">{childStruct1.Value}</span>"</span>);</span><br><span class="line"></span><br><span class="line">    childStruct1.Value = <span class="number">2</span>;</span><br><span class="line">    Console.WriteLine(<span class="string">"-------childStruct1.Value的值修改后-------"</span>);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">$"childStruct1.Value:<span class="subst">{childStruct1.Value}</span>"</span>);</span><br><span class="line">    Console.WriteLine(<span class="string">$"parentStruct1.ChildStruct.Value:<span class="subst">{parentStruct1.ChildStruct.Value}</span>"</span>);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">    ChildClass childClass1 = <span class="keyword">new</span> ChildClass();</span><br><span class="line">    childClass1.Value = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    parentStruct1.ChildClass = childClass1;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">$"childClass1.Value:<span class="subst">{childClass1.Value}</span>"</span>);</span><br><span class="line"></span><br><span class="line">    childClass1.Value = <span class="number">4</span>;</span><br><span class="line">    Console.WriteLine(<span class="string">"-------childClass1.Value的值修改后-------"</span>);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">$"childClass1.Value:<span class="subst">{childClass1.Value}</span>"</span>);</span><br><span class="line">    Console.WriteLine(<span class="string">$"parentStruct1.ChildClass.Value:<span class="subst">{parentStruct1.ChildClass.Value}</span>"</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="输出结果-3">输出结果</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">childStruct1.Value:1</span><br><span class="line">-------childStruct1.Value的值修改后-------</span><br><span class="line">childStruct1.Value:2</span><br><span class="line">parentStruct1.ChildStruct.Value:1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">childClass1.Value:3</span><br><span class="line">-------childClass1.Value的值修改后-------</span><br><span class="line">childClass1.Value:4</span><br><span class="line">parentStruct1.ChildClass.Value:4</span><br></pre></td></tr></table></figure>
<h3 id="分析-4">分析</h3>
<p>Struct的Struct成员存储的是成员内部的值，而Struct的Class成员存储的是成员的引用。并且在C#11之前的版本没法使用ref成员。因此Struct类型的成员没法使用享元模式。因为每次都会拷贝。</p>
<h1 id="疑问">疑问</h1>
<p>对于C#的ref关键词，个人认为ref在修饰参数时和作用与类型上时是不一样的。
修饰参数时表示参数是通过引用的方式来传递的，但没法传递一个数组的元素的引用。只能传递数组元素的值拷贝，在内部对引用的变更并不会影响到外部。对此感到疑惑，因此需要慎重在方法内对于ref或out修饰的参数的引用进行修改。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/02/15/AI%E7%BB%98%E7%94%BB-Stable-Diffusion%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/02/15/AI%E7%BB%98%E7%94%BB-Stable-Diffusion%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="post-title-link" itemprop="url">AI绘画-Stable Diffusion环境搭建</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-15 21:23:05" itemprop="dateCreated datePublished" datetime="2023-02-15T21:23:05+08:00">2023-02-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-11 02:21:58" itemprop="dateModified" datetime="2023-10-11T02:21:58+08:00">2023-10-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ai绘画-stable-diffusion环境搭建">AI绘画-Stable
Diffusion环境搭建</h1>
<ol type="1">
<li><p>下载git</p>
<p><code>https://git-scm.com/download/win</code></p></li>
<li><p>下载python 3.10.6（其他版本的python可能会出现报错）</p>
<p><code>https://www.python.org/ftp/python/3.10.6/python-3.10.6-amd64.exe</code></p>
<p>安装时需要勾选Add Python 3.10 to PATH。</p></li>
<li><p>下载项目</p>
<p><code>https://github.com/AUTOMATIC1111/stable-diffusion-webui.git</code></p></li>
<li><p>进入下载的目录</p>
<p>打开<code>stable-diffusion-webui\webui-user.bat</code>文件。</p>
<p>配置<code>PYTHON</code>值为python安装目录和<code>VENV_DIR</code>为取一个你想要保存模型的文件夹名称，例如：
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line"> </span><br><span class="line">set PYTHON=C:\Users\10246\AppData\Local\Programs\Python\Python310\python.exe</span><br><span class="line">set GIT=</span><br><span class="line">set VENV_DIR=venv</span><br><span class="line">set COMMANDLINE_ARGS=</span><br><span class="line"> </span><br><span class="line">call webui.bat</span><br></pre></td></tr></table></figure></p></li>
<li><p>可以使用dev-sidecar来加速。</p>
<p><code>https://github.com/docmirror/dev-sidecar</code></p></li>
<li><p>运行<code>python -m pip install --upgrade pip</code>升级pip版本。</p></li>
<li><p>运行<code>stable-diffusion-webui\webui-user.bat</code>文件。</p></li>
<li><p>然后根据依赖信息(<code>https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Dependencies</code>)下载<code>sd-v1-4.ckpt</code>文件。</p>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">magnet:?xt=urn:btih:3a4a612d75ed088ea542acac52f9f45987488d1c&amp;dn=sd-v1-4.ckpt&amp;tr=udp%3a%2f%2ftracker.openbittorrent.com%3a6969%2fannounce&amp;tr=udp%3a%2f%2ftracker.opentrackr.org%3a1337</span><br></pre></td></tr></table></figure></p></li>
<li><p>将该文件放入<code>stable-diffusion-webui\models\Stable-diffusion</code>目录下，并重命名为<code>model.ckpt</code>。</p></li>
<li><p>如果出现<code>No module 'xformers'</code>。或者显存不够<code>CUDA out of memory</code>，修改<code>stable-diffusion-webui\webui-user.bat</code>文件，<code>COMMANDLINE_ARGS</code>后加入<code>--medvram --reinstall-xformers --xformers</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line"> </span><br><span class="line">set PYTHON=C:\Users\10246\AppData\Local\Programs\Python\Python310\python.exe</span><br><span class="line">set GIT=</span><br><span class="line">set VENV_DIR=venv</span><br><span class="line">set COMMANDLINE_ARGS=--medvram --reinstall-xformers --xformers</span><br><span class="line"> </span><br><span class="line">call webui.bat</span><br></pre></td></tr></table></figure></li>
<li><p>没有报错，出现<code>To create a public link, set share=True in launch().</code>，代表安装成功。</p></li>
<li><p>在浏览器的地址栏输入<code>http://127.0.0.1:7860</code>，进入ui管理界面。</p></li>
<li><p>设置中文：</p>
<ol type="a">
<li>点击<code>Extensions</code>。</li>
<li>点击<code>Available</code>。</li>
<li>将<code>localization</code>的勾去掉。</li>
<li>往下翻，找到<code>zh_CN Localization</code>，点击<code>Install</code>进行安装。</li>
<li>安装完，点击<code>Settings</code>，再点击左侧菜单的<code>User interface</code>。</li>
<li>从右侧内容区域找到<code>Localization</code>，点击右侧的刷新按钮，点击下拉框，选择<code>zh_CN</code>。</li>
<li>点击顶部的<code>Apply settings</code>，再点击<code>Reload UI</code>,
就完成中文设置。</li>
</ol></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2023/01/13/Unity%E7%BC%96%E8%BE%91%E5%99%A8%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/13/Unity%E7%BC%96%E8%BE%91%E5%99%A8%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">Unity编辑器脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-13 17:31:31" itemprop="dateCreated datePublished" datetime="2023-01-13T17:31:31+08:00">2023-01-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-27 11:01:53" itemprop="dateModified" datetime="2023-11-27T11:01:53+08:00">2023-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="生成窗口">生成窗口</h1>
<ol type="1">
<li>在<code>Editor</code>的目录下创建一个C#脚本。写入如下的代码：
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FloorManagerWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">{</span><br><span class="line">       [<span class="meta">MenuItem(<span class="string">"数据管理/地板"</span>)</span>]</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ShowWindow</span>()</span></span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">var</span> window = EditorWindow.GetWindow(<span class="keyword">typeof</span>(FloorManagerWindow), <span class="literal">false</span>, <span class="string">"地板数据编辑器"</span>);</span><br><span class="line">		window.minSize = <span class="keyword">new</span> Vector2(<span class="number">1100</span>, <span class="number">600</span>);</span><br><span class="line">		window.Show();</span><br><span class="line">	}</span><br><span class="line">   }</span><br></pre></td></tr></table></figure></li>
<li>创建一个编辑器窗口，需要该脚本继承<code>UnityEditor.EditorWindows</code>类。</li>
<li>需要编写一个任意方法名的静态方法，如：<code>public static void ShowWindow() { }</code>。并给该方法增加一个<code>[MenuItem]</code>特性，如：<code>[MenuItem("数据管理/地板")]</code>，该特性中的参数代表Unity编辑器的菜单的路径。该特性可以按照传入的参数在Unity编辑器上创建对应的菜单。并在该菜单项的点击事件触发时调用被特性标记的方法。</li>
<li>调用<code>EditorWindow.GetWindow(typeof(FloorManagerWindow))</code>方法会根据类型创建一个窗口。</li>
<li><code>Show()</code>方法会显示窗口。PS：<code>EditorWindow.GetWindow()</code>方法本身就会去调用<code>Show()</code>方法，猜想可能是为了在<code>EditorWindow.GetWindow()</code>之后修改了某些值，因此需要再手动调用<code>Show()</code>方法，以更新修改的值。</li>
</ol>
<h1 id="scriptobject">ScriptObject</h1>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2022/12/23/IMGUI%E8%8E%B7%E5%8F%96%E7%AA%97%E5%8F%A3%E5%AE%BD%E5%BA%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/23/IMGUI%E8%8E%B7%E5%8F%96%E7%AA%97%E5%8F%A3%E5%AE%BD%E5%BA%A6/" class="post-title-link" itemprop="url">IMGUI获取窗口宽度</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-23 05:43:34" itemprop="dateCreated datePublished" datetime="2022-12-23T05:43:34+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-27 11:00:57" itemprop="dateModified" datetime="2023-11-27T11:00:57+08:00">2023-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在Unity的论坛中对于获取IMGUI的窗口宽度的帖子的示例中使用<code>Screen.width</code>，但是在不同分辨率下会出现值不准确。建议使用<code>EditorWindow.position</code>中的<code>width</code>值。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://freegostudio.github.io/2022/12/08/C-readonly%E5%92%8Cconst/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jacky Jiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="废狗的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 废狗的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/08/C-readonly%E5%92%8Cconst/" class="post-title-link" itemprop="url">C# readonly和const</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-08 17:34:33" itemprop="dateCreated datePublished" datetime="2022-12-08T17:34:33+08:00">2022-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-27 10:59:54" itemprop="dateModified" datetime="2023-11-27T10:59:54+08:00">2023-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">软件开发</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="const">const</h1>
<p>修饰的变量只能在声明的时候赋值进行初始化。</p>
<p>const默认是static的，不能手动为const添加一个static修饰符。</p>
<p>本质上是在编译阶段将使用<code>const</code>的代码处用常量值进行替换，类似c语言中的<code>#define</code>。</p>
<h1 id="readonly">readonly</h1>
<p>readonly变量是运行时变量，可以在声明或构造函数中初始化。</p>
<p>readonly在第一次赋值后不能修改它的值。</p>
<h1 id="区别">区别</h1>
<ol type="1">
<li>const是一个编译时常量，readonly是一个运行时常量。</li>
<li>const只能修饰基元类型，枚举类型或字符串类型，readonly没有限制。</li>
</ol>
<h1 id="建议">建议</h1>
<ol type="1">
<li>当值绝对不变的时候使用<code>const</code>，例如一周的天数是7。</li>
<li>当想要对类的不同实例使用不同的常量，使用<code>readonly</code>。</li>
<li>当在项目的配置文件中配置的项目中的可能会变化的常量，使用<code>static readonly</code>。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Jacky Jiang</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
